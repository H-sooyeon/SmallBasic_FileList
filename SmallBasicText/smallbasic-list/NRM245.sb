GraphicsWindow.Height = 1000
GraphicsWindow.Width = 1200
squaresize = 20
foodsupply = 0
dung1state = "Not Finnished"
dung2state = "Not Finnished"
dung3state = "Not Finnished"
dostartstory = "True"
Dodungeontut = "True"
Dobattletut = "True"
dung1oktocongrat = "True"
dostartgraph:
gohome = "False"
state = "Home"
timeset = "True"
cubattackloc = 425
enemyproj = 675
oktoblock = "True"
showlife = "True"
GraphicsWindow.BackgroundColor = "Orange"
GraphicsWindow.BrushColor = "Red"
cublochome = 600 - squaresize / 2
cublochome_y = 900 - squaresize
GraphicsWindow.FillRectangle(600 - squaresize / 2, 900 - squaresize, squaresize, squaresize)
GraphicsWindow.DrawBoundText(540, 830, 200, "Your Cube Warrior!")
GraphicsWindow.PenColor = "Red"
GraphicsWindow.DrawRectangle(300, 100, 100, 50)
GraphicsWindow.DrawBoundText(335, 120, 50, "Feed")
GraphicsWindow.DrawBoundText(300, 65, 100, "Food supply = " + foodsupply)
feedbox = 300
GraphicsWindow.DrawRectangle(450, 100, 100, 50)
GraphicsWindow.DrawBoundText(470, 120, 70, "Dungeon1")
If(dung1state = "Not Finnished") Then
  GraphicsWindow.DrawBoundText(450, 65, 100, "Dungeon not finnished!")
Else
  GraphicsWindow.DrawBoundText(450, 65, 100, "Dungeon finnished!")
EndIf
dung1box = 450
GraphicsWindow.DrawRectangle(600, 100, 100, 50)
GraphicsWindow.DrawBoundText(620, 120, 70, "Dungeon2")
If(dung2state = "Not Finnished") Then
  GraphicsWindow.DrawBoundText(600, 65, 100, "Dungeon not finnished!")
Else
  GraphicsWindow.DrawBoundText(600, 65, 100, "Dungeon finnished!")
EndIf
dung2box = 600
GraphicsWindow.DrawRectangle(750, 100, 100, 50)
GraphicsWindow.DrawBoundText(770, 120, 70, "Dungeon3")
If(dung3state = "Not Finnished") Then
  GraphicsWindow.DrawBoundText(750, 65, 100, "Dungeon not finnished!")
Else
  GraphicsWindow.DrawBoundText(750, 65, 100, "Dungeon finnished!")
EndIf
dung3box = 750
If(dostartstory = "True") Then
  GraphicsWindow.ShowMessage("Aw look. Your CubeWarrior finnaly arrived! You can see him at the bottom of the screen", "Welcome")
  GraphicsWindow.ShowMessage("Now lets feed him to become the strongest CubeWarrior in all of CubeWorld!", "Welcome")
  GraphicsWindow.ShowMessage("Oh no! The other Cubes stole your food!", "Welcome")
  GraphicsWindow.ShowMessage("We will have to hunt them down and reclaim it!", "Welcome")
  GraphicsWindow.ShowMessage("Click on dungeon1 to play.", "Welcome")
  dostartstory = "False"
EndIf
GraphicsWindow.MouseDown = OnMouseDown
GraphicsWindow.KeyDown = OnKeyDown

Sub OnMouseDown
  If(state = "Home") Then
    If(GraphicsWindow.MouseX > feedbox And GraphicsWindow.MouseX < feedbox + 101 And GraphicsWindow.MouseY > 99 And GraphicsWindow.MouseY < 151) Then
      If(foodsupply >= 1) Then
        foodsupply = foodsupply - 1
        squaresize = squaresize + 1
        Dostartgraph = "True"
        GraphicsWindow.Clear()
      Else
        GraphicsWindow.ShowMessage("You don't have any food =,(", "No Food!")
      EndIf
    EndIf
  EndIf
  If(state = "Home") Then
    If(GraphicsWindow.MouseX > dung1box And GraphicsWindow.MouseX < dung1box + 101 And GraphicsWindow.MouseY > 99 And GraphicsWindow.MouseY < 151) Then
      If(dung1state = "Finnished") Then
        GraphicsWindow.ShowMessage("Dungeon1 is finnished", "Finnished")
        Goto endclick
      EndIf
      state = "dung1"
    EndIf
  EndIf
  If(state = "Home") Then
    If(GraphicsWindow.MouseX > dung2box And GraphicsWindow.MouseX < dung2box + 101 And GraphicsWindow.MouseY > 99 And GraphicsWindow.MouseY < 151 And dung1state = "Finnished") Then
      If(dung2state = "Finnished") Then
        GraphicsWindow.ShowMessage("Dungeon2 is finnished", "Finnished")
        Goto endclick
      EndIf
      If(squaresize < 28) Then
        GraphicsWindow.ShowMessage("Feed your CubeWarrior up before going into the harder dungeon!", "Food")
        Goto endclick
      EndIf
      state = "dung2"
    EndIf
  EndIf
  If(state = "Home") Then
    If(GraphicsWindow.MouseX > dung3box And GraphicsWindow.MouseX < dung3box + 101 And GraphicsWindow.MouseY > 99 And GraphicsWindow.MouseY < 151 And dung1state = "Finnished" And dung2state = "Finnished") Then
      If(dung3state = "Finnished") Then
        GraphicsWindow.ShowMessage("Dungeon3 is finnished", "Finnished")
        Goto endclick
      EndIf
      state = "dung3"
    EndIf
  EndIf
  endclick:
EndSub

Checkifstartgraph:
If(dung1state = "Finnished" And dung1oktocongrat = "True") Then
  GraphicsWindow.ShowMessage("Well done. You managed to recover 8 pieces of food!", "Food!")
  GraphicsWindow.ShowMessage("Now lets feed your CubeWarrior. Click on the feed button till you have no food left, and watch your CubeWarrior grow!", "Food!")
  dung1oktocongrat = "False"
EndIf  
If(state = "dung1") Then
  GraphicsWindow.ShowMessage("Dungeon 1", "Dungeon 1")
  Goto dung1
EndIf
If(state = "dung2") Then
  GraphicsWindow.ShowMessage("Dungeon 2", "Dungeon 2")
  Goto dung2
EndIf
If(state = "dung3") Then
  GraphicsWindow.ShowMessage("Dungeon 3", "Dungeon 3")
  Goto dung3
EndIf
If(Dostartgraph = "True") Then
  Goto dostartgraph
Else
  Goto Checkifstartgraph
EndIf

Sub OnKeyDown
  If(state = "Battle" Or state = "Boss Battle") Then
    If(GraphicsWindow.LastKey = "A" Or GraphicsWindow.LastKey = "Left") Then
      If(oktoblock = "True") Then
        block = "True"
        GraphicsWindow.BrushColor = "Orange"
        GraphicsWindow.FillRectangle(427, 400, 2, 200)
      EndIf
    EndIf
    If(GraphicsWindow.LastKey = "D" Or GraphicsWindow.LastKey = "Right") Then
      GraphicsWindow.BrushColor = "Black"
      GraphicsWindow.FillRectangle(427, 400, 2, 200)
      oktoblock = "False"
      block = "False"
      cubattack = "True"
    EndIf 
  EndIf
  If(state = "dung1" Or state = "dung2" Or state = "dung3") Then
    If(GraphicsWindow.LastKey = "D" Or GraphicsWindow.LastKey = "Right") Then
      If(cubgrid + 1 = enemy1 Or cubgrid + 1 = enemy2 Or cubgrid + 1 = enemy3 Or cubgrid + 1 = enemy4 Or cubgrid + 1 = enemy5 Or cubgrid + 1 = enemy6 Or cubgrid + 1 = enemy7 Or cubgrid + 1 = enemy8 Or cubgrid + 1 = boss Or cubgrid + 1 = foodgrid Or cubgrid + 1 = trap Or cubgrid + 1 = enemy9 Or cubgrid + 1 = enemy10) Then
        If(cubgrid + 1 = enemy1 And enemy1 > 0) Then
          lastenemy = "enemy1"
          enemy1 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy2 And enemy2 > 0) Then
          lastenemy = "enemy2"
          enemy2 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy3 And enemy3 > 0) Then
          lastenemy = "enemy3"
          enemy3 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy4 And enemy4 > 0) Then
          lastenemy = "enemy4"
          enemy4 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy5 And enemy5 > 0) Then
          lastenemy = "enemy5"
          enemy5 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy6 And enemy6 > 0) Then
          lastenemy = "enemy6"
          enemy6 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy7 And enemy7 > 0) Then
          lastenemy = "enemy7"
          enemy7 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy8 And enemy8 > 0) Then
          lastenemy = "enemy8"
          enemy8 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy9 And enemy9 > 0) Then
          lastenemy = "enemy9"
          enemy9 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = enemy10 And enemy10 > 0) Then
          lastenemy = "enemy10"
          enemy10 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 1 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid + 1 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid + 1 = foodgrid) Then
          GraphicsWindow.ShowMessage("Congratulations! You got your food back!", "Dungeon Finnished!")
          gohome = "True"
        ElseIf(cubgrid + 1 = trap) Then
          GraphicsWindow.BrushColor = "Brown"
          GraphicsWindow.FillRectangle(traploc_x, traphloc_y, 10, 50)
          GraphicsWindow.ShowMessage("Oh no! A trap wall!", "Trap")
          GraphicsWindow.ShowMessage("Now you will have to go the other way!", "Trap")
        EndIf
      ElseIf(cubgrid + 1 = grid1 Or cubgrid + 1 = grid2 Or cubgrid + 1 = grid3 Or cubgrid + 1 = grid4 Or cubgrid + 1 = grid5 Or cubgrid + 1 = grid6 Or cubgrid + 1 = grid7 Or cubgrid + 1 = grid8 Or cubgrid + 1 = grid9 Or cubgrid + 1 = grid10 Or cubgrid + 1 = grid11 Or cubgrid + 1 = grid12 Or cubgrid + 1 = grid13 Or cubgrid + 1 = grid14 Or cubgrid + 1 = grid15 Or cubgrid + 1 = grid16 Or cubgrid + 1 = grid17 Or cubgrid + 1 = grid18 Or cubgrid + 1 = grid19 Or cubgrid + 1 = grid20 Or cubgrid + 1 = grid21 Or cubgrid + 1 = grid22 Or cubgrid + 1 = grid23 Or cubgrid + 1 = grid24 Or cubgrid + 1 = grid25 Or cubgrid + 1 = grid26 Or cubgrid + 1 = grid27 Or cubgrid + 1 = grid28 Or cubgrid + 1 = grid29 Or cubgrid + 1 = grid30 Or cubgrid + 1 = grid31 Or cubgrid + 1 = grid32 Or cubgrid + 1 = grid33 Or cubgrid + 1 = grid34 Or cubgrid + 1 = grid35 Or cubgrid + 1 = grid36 Or cubgrid + 1 = grid37 Or cubgrid + 1 = grid38 Or cubgrid + 1 = grid39 Or cubgrid + 1 = grid40 Or cubgrid + 1 = grid41 Or cubgrid + 1 = grid42 Or cubgrid + 1 = grid43 Or cubgrid + 1 = grid44 Or cubgrid + 1 = grid45 Or cubgrid + 1 = grid46 Or cubgrid + 1 = grid47 Or cubgrid + 1 = grid48 Or cubgrid + 1 = grid49 Or cubgrid + 1 = grid50) Then
        GraphicsWindow.BrushColor = "White"
        GraphicsWindow.PenColor = "Black"
        GraphicsWindow.FillRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        GraphicsWindow.DrawRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        cubloc_x = cubloc_x + 50
        cubgrid = cubgrid + 1
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cubloc_x, cubloc_y, squaresize, squaresize)
      EndIf
    EndIf
    If(GraphicsWindow.LastKey = "A" Or GraphicsWindow.LastKey = "Left") Then
      If(cubgrid - 1 = enemy1 Or cubgrid - 1 = enemy2 Or cubgrid - 1 = enemy3 Or cubgrid - 1 = enemy4 Or cubgrid - 1 = enemy5 Or cubgrid - 1 = enemy6 Or cubgrid - 1 = enemy7 Or cubgrid - 1 = enemy8 Or cubgrid - 1 = boss Or cubgrid - 1 = trap Or cubgrid - 1 = enemy9 Or cubgrid - 1 = enemy10 Or cubgrid - 1 = foodgrid) Then
        If(cubgrid - 1 = enemy1 And enemy1 > 0) Then
          lastenemy = "enemy1"
          enemy1 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy2 And enemy2 > 0) Then
          lastenemy = "enemy2"
          enemy2 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy3 And enemy3 > 0) Then
          lastenemy = "enemy3"
          enemy3 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy4 And enemy4 > 0) Then
          lastenemy = "enemy4"
          enemy4 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy5 And enemy5 > 0) Then
          lastenemy = "enemy5"
          enemy5 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy6 And enemy6 > 0) Then
          lastenemy = "enemy6"
          enemy6 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy7 And enemy7 > 0) Then
          lastenemy = "enemy7"
          enemy7 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy8 And enemy8 > 0) Then
          lastenemy = "enemy8"
          enemy8 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy9 And enemy9 > 0) Then
          lastenemy = "enemy9"
          enemy9 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 1 = enemy10 And enemy10 > 0) Then
          lastenemy = "enemy10"
          enemy10 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid - 1 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid - 1 = foodgrid) Then
          GraphicsWindow.ShowMessage("Congratulations! You got your food back!", "Dungeon Finnished!")
          gohome = "True"  
        ElseIf(cubgrid - 1 = trap) Then
          GraphicsWindow.BrushColor = "Brown"
          GraphicsWindow.FillRectangle(traploc_x, traphloc_y, 10, 50)
          GraphicsWindow.ShowMessage("Oh no! A trap wall!", "Trap")
          GraphicsWindow.ShowMessage("Now you will have to go the other way!", "Trap")
        EndIf
      ElseIf(cubgrid - 1 = grid1 Or cubgrid - 1 = grid2 Or cubgrid - 1 = grid3 Or cubgrid - 1 = grid4 Or cubgrid - 1 = grid5 Or cubgrid - 1 = grid6 Or cubgrid - 1 = grid7 Or cubgrid - 1 = grid8 Or cubgrid - 1 = grid9 Or cubgrid - 1 = grid10 Or cubgrid - 1 = grid11 Or cubgrid - 1 = grid12 Or cubgrid - 1 = grid13 Or cubgrid - 1 = grid14 Or cubgrid - 1 = grid15 Or cubgrid - 1 = grid16 Or cubgrid - 1 = grid17 Or cubgrid - 1 = grid18 Or cubgrid - 1 = grid19 Or cubgrid - 1 = grid20 Or cubgrid - 1 = grid21 Or cubgrid - 1 = grid22 Or cubgrid - 1 = grid23 Or cubgrid - 1 = grid24 Or cubgrid - 1 = grid25 Or cubgrid - 1 = grid26 Or cubgrid - 1 = grid27 Or cubgrid - 1 = grid28 Or cubgrid - 1 = grid29 Or cubgrid - 1 = grid30 Or cubgrid - 1 = grid31 Or cubgrid - 1 = grid32 Or cubgrid - 1 = grid33 Or cubgrid - 1 = grid34 Or cubgrid - 1 = grid35 Or cubgrid - 1 = grid36 Or cubgrid - 1 = grid37 Or cubgrid - 1 = grid38 Or cubgrid - 1 = grid39 Or cubgrid - 1 = grid40 Or cubgrid - 1 = grid41 Or cubgrid - 1 = grid42 Or cubgrid - 1 = grid43 Or cubgrid - 1 = grid44 Or cubgrid - 1 = grid45 Or cubgrid - 1 = grid46 Or cubgrid - 1 = grid47 Or cubgrid - 1 = grid48 Or cubgrid - 1 = grid49 Or cubgrid - 1 = grid50) Then
        GraphicsWindow.BrushColor = "White"
        GraphicsWindow.PenColor = "Black"
        GraphicsWindow.FillRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        GraphicsWindow.DrawRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        cubloc_x = cubloc_x - 50
        cubgrid = cubgrid - 1
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cubloc_x, cubloc_y, squaresize, squaresize)
      EndIf
    EndIf
    If(GraphicsWindow.LastKey = "S" Or GraphicsWindow.LastKey = "Down") Then
      If(cubgrid - 100 = enemy1 Or cubgrid - 100 = enemy2 Or cubgrid - 100 = enemy3 Or cubgrid - 100 = enemy4 Or cubgrid - 100 = enemy5 Or cubgrid - 100 = enemy6 Or cubgrid - 100 = enemy7 Or cubgrid - 100 = enemy8 Or cubgrid - 100 = boss Or cubgrid - 100 = trap Or cubgrid - 100 = enemy9 Or cubgrid - 100 = enemy10 Or cubgrid - 100 = foodgrid) Then
        If(cubgrid - 100 = enemy1 And enemy1 > 0) Then
          lastenemy = "enemy1"
          enemy1 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy2 And enemy2 > 0) Then
          lastenemy = "enemy2"
          enemy2 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy3 And enemy3 > 0) Then
          lastenemy = "enemy3"
          enemy3 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy4 And enemy4 > 0) Then
          lastenemy = "enemy4"
          enemy4 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy5 And enemy5 > 0) Then
          lastenemy = "enemy5"
          enemy5 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy6 And enemy6 > 0) Then
          lastenemy = "enemy6"
          enemy6 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy7 And enemy7 > 0) Then
          lastenemy = "enemy7"
          enemy7 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy8 And enemy8 > 0) Then
          lastenemy = "enemy8"
          enemy8 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy9 And enemy9 > 0) Then
          lastenemy = "enemy9"
          enemy9 = 0
          Goto BattleNorm
        ElseIf(cubgrid - 100 = enemy10 And enemy10 > 0) Then
          lastenemy = "enemy10"
          enemy10 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid - 100 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid - 100 = foodgrid) Then
          GraphicsWindow.ShowMessage("Congratulations! You got your food back!", "Dungeon Finnished!")
          gohome = "True"  
        ElseIf(cubgrid - 100 = trap) Then
          GraphicsWindow.BrushColor = "Brown"
          GraphicsWindow.FillRectangle(traploc_x, traphloc_y, 10, 50)
          GraphicsWindow.ShowMessage("Oh no! A trap wall!", "Trap")
          GraphicsWindow.ShowMessage("Now you will have to go the other way!", "Trap")
        EndIf
      ElseIf(cubgrid - 100 = grid1 Or cubgrid - 100 = grid2 Or cubgrid - 100 = grid3 Or cubgrid - 100 = grid4 Or cubgrid - 100 = grid5 Or cubgrid - 100 = grid6 Or cubgrid - 100 = grid7 Or cubgrid - 100 = grid8 Or cubgrid - 100 = grid9 Or cubgrid - 100 = grid10 Or cubgrid - 100 = grid11 Or cubgrid - 100 = grid12 Or cubgrid - 100 = grid13 Or cubgrid - 100 = grid14 Or cubgrid - 100 = grid15 Or cubgrid - 100 = grid16 Or cubgrid - 100 = grid17 Or cubgrid - 100 = grid18 Or cubgrid - 100 = grid19 Or cubgrid - 100 = grid20 Or cubgrid - 100 = grid21 Or cubgrid - 100 = grid22 Or cubgrid - 100 = grid23 Or cubgrid - 100 = grid24 Or cubgrid - 100 = grid25 Or cubgrid - 100 = grid26 Or cubgrid - 100 = grid27 Or cubgrid - 100 = grid28 Or cubgrid - 100 = grid29 Or cubgrid - 100 = grid30 Or cubgrid - 100 = grid31 Or cubgrid - 100 = grid32 Or cubgrid - 100 = grid33 Or cubgrid - 100 = grid34 Or cubgrid - 100 = grid35 Or cubgrid - 100 = grid36 Or cubgrid - 100 = grid37 Or cubgrid - 100 = grid38 Or cubgrid - 100 = grid39 Or cubgrid - 100 = grid40 Or cubgrid - 100 = grid41 Or cubgrid - 100 = grid42 Or cubgrid - 100 = grid43 Or cubgrid - 100 = grid44 Or cubgrid - 100 = grid45 Or cubgrid - 100 = grid46 Or cubgrid - 100 = grid47 Or cubgrid - 100 = grid48 Or cubgrid - 100 = grid49 Or cubgrid - 100 = grid50) Then
        GraphicsWindow.BrushColor = "White"
        GraphicsWindow.PenColor = "Black"
        GraphicsWindow.FillRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        GraphicsWindow.DrawRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        cubloc_y = cubloc_y + 50
        cubgrid = cubgrid - 100
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cubloc_x, cubloc_y, squaresize, squaresize)
      EndIf
    EndIf
    If(GraphicsWindow.LastKey = "W" Or GraphicsWindow.LastKey = "Up") Then
      If(cubgrid + 100 = enemy1 Or cubgrid + 100 = enemy2 Or cubgrid + 100 = enemy3 Or cubgrid + 100 = enemy4 Or cubgrid + 100 = enemy5 Or cubgrid + 100 = enemy6 Or cubgrid + 100 = enemy7 Or cubgrid + 100 = enemy8 Or cubgrid + 100 = boss Or cubgrid + 100 = trap Or cubgrid + 100 = enemy9 Or cubgrid + 100 = enemy10 Or cubgrid + 100 = foodgrid) Then
        If(cubgrid + 100 = enemy1 And enemy1 > 0) Then
          lastenemy = "enemy1"
          enemy1 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy2 And enemy2 > 0) Then
          lastenemy = "enemy2"
          enemy2 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy3 And enemy3 > 0) Then
          lastenemy = "enemy3"
          enemy3 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy4 And enemy4 > 0) Then
          lastenemy = "enemy4"
          enemy4 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy5 And enemy5 > 0) Then
          lastenemy = "enemy5"
          enemy5 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy6 And enemy6 > 0) Then
          lastenemy = "enemy6"
          enemy6 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy7 And enemy7 > 0) Then
          lastenemy = "enemy7"
          enemy7 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy8 And enemy8 > 0) Then
          lastenemy = "enemy8"
          enemy8 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy9 And enemy9 > 0) Then
          lastenemy = "enemy9"
          enemy9 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = enemy10 And enemy10 > 0) Then
          lastenemy = "enemy10"
          enemy10 = 0
          Goto BattleNorm
        ElseIf(cubgrid + 100 = boss And boss > 0) Then
          lastenemy = "boss"
          boss = 0
          Goto BossBattle
        ElseIf(cubgrid + 100 = foodgrid) Then
          GraphicsWindow.ShowMessage("Congratulations! You got your food back!", "Dungeon Finnished!")
          gohome = "True"  
        ElseIf(cubgrid + 100 = trap) Then
          GraphicsWindow.BrushColor = "Brown"
          GraphicsWindow.FillRectangle(traploc_x, traphloc_y, 10, 50)
          GraphicsWindow.ShowMessage("Oh no! A trap wall!", "Trap")
          GraphicsWindow.ShowMessage("Now you will have to go the other way!", "Trap")
        EndIf
      ElseIf(cubgrid + 100 = grid1 Or cubgrid + 100 = grid2 Or cubgrid + 100 = grid3 Or cubgrid + 100 = grid4 Or cubgrid + 100 = grid5 Or cubgrid + 100 = grid6 Or cubgrid - 100 = grid7 Or cubgrid + 100 = grid8 Or cubgrid + 100 = grid9 Or cubgrid + 100 = grid10 Or cubgrid + 100 = grid11 Or cubgrid + 100 = grid12 Or cubgrid + 100 = grid13 Or cubgrid + 100 = grid14 Or cubgrid + 100 = grid15 Or cubgrid + 100 = grid16 Or cubgrid + 100 = grid17 Or cubgrid + 100 = grid18 Or cubgrid + 100 = grid19 Or cubgrid + 100 = grid20 Or cubgrid + 100 = grid21 Or cubgrid + 100 = grid22 Or cubgrid + 100 = grid23 Or cubgrid + 100 = grid24 Or cubgrid + 100 = grid25 Or cubgrid + 100 = grid26 Or cubgrid + 100 = grid27 Or cubgrid + 100 = grid28 Or cubgrid + 100 = grid29 Or cubgrid + 100 = grid30 Or cubgrid + 100 = grid31 Or cubgrid + 100 = grid32 Or cubgrid + 100 = grid33 Or cubgrid + 100 = grid34 Or cubgrid + 100 = grid35 Or cubgrid + 100 = grid36 Or cubgrid + 100 = grid37 Or cubgrid + 100 = grid38 Or cubgrid + 100 = grid39 Or cubgrid + 100 = grid40 Or cubgrid + 100 = grid41 Or cubgrid + 100 = grid42 Or cubgrid + 100 = grid43 Or cubgrid + 100 = grid44 Or cubgrid + 100 = grid45 Or cubgrid + 100 = grid46 Or cubgrid + 100 = grid47 Or cubgrid + 100 = grid48 Or cubgrid + 100 = grid49 Or cubgrid + 100 = grid50) Then
        GraphicsWindow.BrushColor = "White"
        GraphicsWindow.PenColor = "Black"
        GraphicsWindow.FillRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        GraphicsWindow.DrawRectangle(cubloc_x - (50 - squaresize) / 2, cubloc_y - (50 - squaresize) / 2, 50, 50)
        cubloc_y = cubloc_y - 50
        cubgrid = cubgrid + 100
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cubloc_x, cubloc_y, squaresize, squaresize)
      EndIf
    EndIf
    Goto EndKey
  BattleNorm:
  GraphicsWindow.ShowMessage("Battle!", "Battle!")
  GraphicsWindow.Clear()
  GraphicsWindow.BackgroundColor = "Black"
  GraphicsWindow.BrushColor = "Red"
  GraphicsWindow.FillRectangle(225, 400, 200, 200)
  GraphicsWindow.BrushColor = "Blue"
  GraphicsWindow.FillRectangle(775, 400, 200, 200)
  state = "Battle"
  Goto EndKey
  Bossbattle:
  GraphicsWindow.ShowMessage("Boss Battle!", "Boss Battle!")
  state = "Boss Battle"
  GraphicsWindow.Clear()
  GraphicsWindow.BackgroundColor = "Black"
  GraphicsWindow.BrushColor = "Red"
  GraphicsWindow.FillRectangle(225, 400, 200, 200)
  GraphicsWindow.BrushColor = "Brown"
  GraphicsWindow.FillRectangle(775, 200, 400, 400)
  EndIf
  
  If(state = "Home") Then
    If(GraphicsWindow.LastKey = "Left" Or GraphicsWindow.LastKey = "A") Then
      If(cublochome - 20 < 0) Then
        Goto EndKey
      Else
        GraphicsWindow.BrushColor = "Orange"
        GraphicsWindow.FillRectangle(cublochome, cublochome_y, squaresize, squaresize)
        cublochome = cublochome - 20
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cublochome, cublochome_y, squaresize, squaresize)
      EndIf
    EndIf
    If(GraphicsWindow.LastKey = "Right" Or GraphicsWindow.LastKey = "D") Then
      If(cublochome + 20 > 1150) Then
        Goto EndKey
      Else
        GraphicsWindow.BrushColor = "Orange"
        GraphicsWindow.FillRectangle(cublochome, cublochome_y, squaresize, squaresize)
        cublochome = cublochome + 20
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.FillRectangle(cublochome, cublochome_y, squaresize, squaresize)
      EndIf
    EndIf
  EndIf
  EndKey:
EndSub

dunggraphics:
GraphicsWindow.Clear()
GraphicsWindow.BrushColor = "White"
GraphicsWindow.PenColor = "Black"
GraphicsWindow.BackgroundColor = "Black"
GraphicsWindow.FillRectangle(graphgrid1_x, graphgrid1_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid1_x, graphgrid1_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid2_x, graphgrid2_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid2_x, graphgrid2_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid3_x, graphgrid3_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid3_x, graphgrid3_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid4_x, graphgrid4_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid4_x, graphgrid4_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid5_x, graphgrid5_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid5_x, graphgrid5_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid6_x, graphgrid6_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid6_x, graphgrid6_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid7_x, graphgrid7_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid7_x, graphgrid7_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid8_x, graphgrid8_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid8_x, graphgrid8_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid9_x, graphgrid9_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid9_x, graphgrid9_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid10_x, graphgrid10_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid10_x, graphgrid10_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid11_x, graphgrid11_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid11_x, graphgrid11_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid12_x, graphgrid12_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid12_x, graphgrid12_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid13_x, graphgrid13_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid13_x, graphgrid13_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid14_x, graphgrid14_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid14_x, graphgrid14_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid15_x, graphgrid15_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid15_x, graphgrid15_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid16_x, graphgrid16_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid16_x, graphgrid16_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid17_x, graphgrid17_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid17_x, graphgrid17_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid18_x, graphgrid18_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid18_x, graphgrid18_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid19_x, graphgrid19_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid19_x, graphgrid19_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid20_x, graphgrid20_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid20_x, graphgrid20_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid21_x, graphgrid21_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid21_x, graphgrid21_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid22_x, graphgrid22_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid22_x, graphgrid22_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid23_x, graphgrid23_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid23_x, graphgrid23_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid24_x, graphgrid24_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid24_x, graphgrid24_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid25_x, graphgrid25_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid25_x, graphgrid25_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid26_x, graphgrid26_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid26_x, graphgrid26_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid27_x, graphgrid27_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid27_x, graphgrid27_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid28_x, graphgrid28_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid28_x, graphgrid28_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid29_x, graphgrid29_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid29_x, graphgrid29_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid30_x, graphgrid30_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid30_x, graphgrid30_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid31_x, graphgrid31_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid31_x, graphgrid31_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid32_x, graphgrid32_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid32_x, graphgrid32_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid33_x, graphgrid33_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid33_x, graphgrid33_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid34_x, graphgrid34_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid34_x, graphgrid34_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid35_x, graphgrid35_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid35_x, graphgrid35_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid36_x, graphgrid36_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid36_x, graphgrid36_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid37_x, graphgrid37_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid37_x, graphgrid37_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid38_x, graphgrid38_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid38_x, graphgrid38_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid39_x, graphgrid39_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid39_x, graphgrid39_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid40_x, graphgrid40_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid40_x, graphgrid40_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid41_x, graphgrid41_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid41_x, graphgrid41_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid42_x, graphgrid42_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid42_x, graphgrid42_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid43_x, graphgrid43_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid43_x, graphgrid43_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid44_x, graphgrid44_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid44_x, graphgrid44_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid45_x, graphgrid45_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid45_x, graphgrid45_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid46_x, graphgrid46_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid46_x, graphgrid46_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid47_x, graphgrid47_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid47_x, graphgrid47_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid48_x, graphgrid48_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid48_x, graphgrid48_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid49_x, graphgrid49_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid49_x, graphgrid49_y, 50, 50)
GraphicsWindow.FillRectangle(graphgrid50_x, graphgrid50_y, 50, 50)
GraphicsWindow.DrawRectangle(graphgrid50_x, graphgrid50_y, 50, 50)
GraphicsWindow.BrushColor = "Blue"
If(enemy1 = 0) Then
  If(lastenemy = "enemy1") Then
    cubgrid = enemy1_2
    cubloc_x = enemygraph1_x
    cubloc_y = enemygraph1_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph1_x, enemygraph1_y, enemysize, enemysize)
EndIf
If(enemy2 = 0) Then
  If(lastenemy = "enemy2") Then
    cubgrid = enemy2_2
    cubloc_x = enemygraph2_x
    cubloc_y = enemygraph2_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph2_x, enemygraph2_y, enemysize, enemysize)
EndIf
If(enemy3 = 0) Then
  If(lastenemy = "enemy3") Then
    cubgrid = enemy3_2
    cubloc_x = enemygraph3_x
    cubloc_y = enemygraph3_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph3_x, enemygraph3_y, enemysize, enemysize)
EndIf
If(enemy4 = 0) Then
  If(lastenemy = "enemy4") Then
    cubgrid = enemy4_2
    cubloc_x = enemygraph4_x
    cubloc_y = enemygraph4_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph4_x, enemygraph4_y, enemysize, enemysize)
EndIf
If(enemy5 = 0) Then
  If(lastenemy = "enemy5") Then
    cubgrid = enemy5_2
    cubloc_x = enemygraph5_x
    cubloc_y = enemygraph5_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph5_x, enemygraph5_y, enemysize, enemysize)
EndIf
If(enemy6 = 0) Then
  If(lastenemy = "enemy6") Then
    cubgrid = enemy6_2
    cubloc_x = enemygraph6_x
    cubloc_y = enemygraph6_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph6_x, enemygraph6_y, enemysize, enemysize)
EndIf
If(enemy7 = 0) Then
  If(lastenemy = "enemy7") Then
    cubgrid = enemy7_2
    cubloc_x = enemygraph7_x
    cubloc_y = enemygraph7_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph7_x, enemygraph7_y, enemysize, enemysize)
EndIf
If(enemy8 = 0) Then
  If(lastenemy = "enemy8") Then
    cubgrid = enemy8_2
    cubloc_x = enemygraph8_x
    cubloc_y = enemygraph8_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph8_x, enemygraph8_y, enemysize, enemysize)
EndIf
If(enemy9 = 0) Then
  If(lastenemy = "enemy9") Then
    cubgrid = enemy9_2
    cubloc_x = enemygraph9_x
    cubloc_y = enemygraph9_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph9_x, enemygraph9_y, enemysize, enemysize)
EndIf
If(enemy10 = 0) Then
  If(lastenemy = "enemy10") Then
    cubgrid = enemy10_2
    cubloc_x = enemygraph10_x
    cubloc_y = enemygraph10_y
  EndIf
Else
  GraphicsWindow.FillRectangle(enemygraph10_x, enemygraph10_y, enemysize, enemysize)
EndIf
GraphicsWindow.BrushColor = "Brown"
If(boss = 0) Then
  If(lastenemy = "boss") Then
    cubgrid = boss_2
    cubloc_x = bossgraph_x + ((46 - squaresize) / 2)
    cubloc_y = bossgraph_y + ((46 - squaresize) / 2)
  EndIf
Else
  GraphicsWindow.FillRectangle(bossgraph_x, bossgraph_y, bosssize, bosssize)
EndIf
GraphicsWindow.BrushColor = "Green"
GraphicsWindow.FillRectangle(foodgraph_x, foodgraph_y, 20, 20)
GraphicsWindow.BrushColor = "Red"
GraphicsWindow.FillRectangle(cubloc_x, cubloc_y, squaresize, squaresize)

If(Dodungeontut = "True") Then
  GraphicsWindow.ShowMessage("Ok, now you must make your way to the food, which is marked out by the green cube.", "Dungeon tutorial")
  GraphicsWindow.ShowMessage("But be carefull, those blue cubes are enemies, and the brown one is the boss!", "Dungeon tutorial")
  GraphicsWindow.ShowMessage("To move around, use either the arrow keys, or the wasd keys.", "Dungeon tutorial")
  Dodungeontut = "False"
EndIf

BattleMechanic:
If(gohome = "True") Then
  GraphicsWindow.Clear()
  If(state = "dung1") Then
    foodsupply = 8
    dung1state = "Finnished"
  ElseIf(state = "dung2") Then
    foodsupply = 8
    dung2state = "Finnished"
  ElseIf(state = "dung3") Then
    foodsupply = 10
    dung3state = "Finnished"
  EndIf
  Goto dostartgraph
EndIf
If(state = "Battle" Or state = "Boss Battle") Then
  If(showlife = "True") Then
    GraphicsWindow.BrushColor = "Black"
    GraphicsWindow.FillRectangle(225, 350, 200, 50)
    GraphicsWindow.PenColor = "Red"
    GraphicsWindow.BrushColor = "Red"
    GraphicsWindow.DrawRectangle(225, 350, 200, 20)
    GraphicsWindow.FillRectangle(225, 350, life * (200 / life_2), 20)
    showlife = "False"
    If(state = "Battle") Then
      GraphicsWindow.PenColor = "Blue"
      GraphicsWindow.BrushColor = "Blue"
      GraphicsWindow.DrawRectangle(775, 350, 200, 20)
      GraphicsWindow.FillRectangle(775, 350, enemylife * (200 / enemylife_2), 20)
    ElseIf(state = "Boss Battle") Then
      GraphicsWindow.PenColor = "Brown"
      GraphicsWindow.BrushColor = "Brown"
      GraphicsWindow.DrawRectangle(775, 150, 400, 20)
      GraphicsWindow.FillRectangle(775, 150, bosslife * (400 / bosslife_2), 20)
    EndIf
  EndIf
  If(Dobattletut = "True") Then
    GraphicsWindow.ShowMessage("You bumped into one of those food thieves!", "Battle tutorial")
    GraphicsWindow.ShowMessage("You must kill him in battle to continue!", "Battle tutorial")
    GraphicsWindow.ShowMessage("To attack press either the right arrow key, or the D button.", "Battle tutorial")
    GraphicsWindow.ShowMessage("To defend press either the left arrow key, or the A button.", "Battle tutorial")
    GraphicsWindow.ShowMessage("Now try and kill your first opponent! But be carefull, you only have 8 lives at the moment for the entire dungeon. Dont be reckless!", "Battle tutorial")
    Dobattletut = "False"
    Program.Delay(1500)
  EndIf
  If(cubattack = "True") Then
    If(timeset = "True") Then
      timecubattack = Clock.Millisecond
      timeset = "False"
    EndIf
    start = "True"
    GraphicsWindow.BrushColor = "Black"
    If(cubattackloc > 425) Then
      GraphicsWindow.FillRectangle(cubattackloc - 50, 450, 95, 10)
      GraphicsWindow.FillRectangle(cubattackloc - 20, 435, 10, 40)  
    EndIf
    GraphicsWindow.BrushColor = "Red"
    GraphicsWindow.FillRectangle(cubattackloc, 450, 95, 10)
    GraphicsWindow.FillRectangle(cubattackloc + 30, 435, 10, 40)
    If(timecubattack - Clock.Millisecond > 200 And cubattackloc < 676) Then
      cubattackloc = cubattackloc + 50
    EndIf
    If(cubattackloc = 675) Then
      If(state = "Boss Battle") Then
        GraphicsWindow.BrushColor = "Black"
        GraphicsWindow.FillRectangle(775, 150, 400, 20)
        bosslife = bosslife - 1
        GraphicsWindow.PenColor = "Brown"
        GraphicsWindow.BrushColor = "Brown"
        GraphicsWindow.DrawRectangle(775, 150, 400, 20)
        GraphicsWindow.FillRectangle(775, 150, bosslife * (400 / bosslife_2), 20)
      Else
        GraphicsWindow.BrushColor = "Black"
        GraphicsWindow.FillRectangle(775, 350, 200, 20)
        enemylife = enemylife - 1
        GraphicsWindow.PenColor = "Blue"
        GraphicsWindow.BrushColor = "Blue"
        GraphicsWindow.DrawRectangle(775, 350, 200, 20)
        GraphicsWindow.FillRectangle(775, 350, enemylife * (200 / enemylife_2), 20)
      EndIf
      showlife = "True"
      oktoblock = "True"
      Sound.PlayChimes()
      cubattack = "False"
      Program.Delay(200)
      GraphicsWindow.BrushColor = "Black"
      GraphicsWindow.FillRectangle(cubattackloc - 50, 450, 95, 10)
      GraphicsWindow.FillRectangle(cubattackloc - 20, 435, 10, 40) 
      cubattackloc = 425
    EndIf
    If(enemylife < 1 Or bosslife < 1) Then
      GraphicsWindow.ShowMessage("You Won!", "You Won!")
      checkenemyproj2 = 0
      timeset = "True"
      enemyproj = 675
      If(whichdungeon = "dung1") Then
        state = "dung1"
        enemylife = 10
      ElseIf(whichdungeon = "dung2") Then
        state = "dung2"
        enemylife = 15
      ElseIf(whichdungeon = "dung3") Then
        state = "dung3"
        enemylife = 20
      EndIf
      GraphicsWindow.Clear()
      Goto dunggraphics
    EndIf
  EndIf
  If(stopcheck1enemyproj = "False" And start = "True") Then
    Battledel = Clock.ElapsedMilliseconds
    stopcheck1enemyproj = "True"
    delen = Math.GetRandomNumber(1000)
    delen = delen + 250
  EndIf
  If(Clock.ElapsedMilliseconds - Battledel > delen) Then
    If(stopcheck1enemyproj2 = "False") Then
      Battledel2 = Clock.ElapsedMilliseconds
      stopcheck1enemyproj2 = "True"
    EndIf
    stopcheck1enemyproj = "True"
    GraphicsWindow.BrushColor = "Blue"
    If(state = "Boss Battle") Then
      GraphicsWindow.BrushColor = "Brown"
    EndIf
    GraphicsWindow.FillRectangle(enemyproj, 530, 95, 10)
    GraphicsWindow.FillRectangle(enemyproj + 70, 515, 10, 40)
    If(Clock.ElapsedMilliseconds - Battledel2 > 200) Then
      checkenemyproj2 = checkenemyproj2 + 1
      GraphicsWindow.BrushColor = "Black"
      GraphicsWindow.FillRectangle(enemyproj, 530, 95, 10)
      GraphicsWindow.FillRectangle(enemyproj + 70, 515, 10, 40)
      enemyproj = enemyproj - 50
      GraphicsWindow.BrushColor = "Blue"
      If(state = "Boss Battle") Then
      GraphicsWindow.BrushColor = "Brown"
      EndIf
      GraphicsWindow.FillRectangle(enemyproj, 530, 95, 10)
      GraphicsWindow.FillRectangle(enemyproj + 70, 515, 10, 40)
      stopcheck1enemyproj2 = "False"
    EndIf
    If(checkenemyproj2 > 4) Then
      GraphicsWindow.BrushColor = "Black"
      GraphicsWindow.FillRectangle(427, 400, 2, 200)
      checkenemyproj2 = 0
      stopcheck1enemyproj = "False"
      GraphicsWindow.BrushColor = "Black"
      GraphicsWindow.FillRectangle(enemyproj, 530, 95, 10)
      GraphicsWindow.FillRectangle(enemyproj + 70, 515, 10, 40)
      enemyproj = 675
      If(block = "True") Then
        block = "False"
        Sound.PlayClick()
        Goto BattleMechanic
      Else
        Sound.PlayBellRing()
        life = life - 1
        GraphicsWindow.BrushColor = "Black"
        GraphicsWindow.FillRectangle(225, 350, 200, 50)
        GraphicsWindow.PenColor = "Red"
        GraphicsWindow.BrushColor = "Red"
        GraphicsWindow.DrawRectangle(225, 350, 200, 20)
        GraphicsWindow.FillRectangle(225, 350, life * (200 / life_2), 20)
      EndIf
      If(life = 0) Then
        GraphicsWindow.ShowMessage("Oh dear you died!" "Death!")
        GraphicsWindow.Clear()
        life = 8
        Goto dostartgraph
      EndIf    
    EndIf
  EndIf
EndIf
Goto BattleMechanic

dung1:
whichdungeon = "dung1"
graphgrid1_x = 50
graphgrid1_y = 450
graphgrid2_x = 100
graphgrid2_y = 450
graphgrid3_x = 100
graphgrid3_y = 400
graphgrid4_x = 100
graphgrid4_y = 500
graphgrid5_x = 100
graphgrid5_y = 550
graphgrid6_x = 100
graphgrid6_y = 350
graphgrid7_x = 150
graphgrid7_y = 350
graphgrid8_x = 200
graphgrid8_y = 350
graphgrid9_x = 200
graphgrid9_y = 350
graphgrid10_x = 250
graphgrid10_y = 350
graphgrid11_x = 300
graphgrid11_y = 350
graphgrid47_x = 350
graphgrid47_y = 350
graphgrid12_x = 400
graphgrid12_y = 350
graphgrid13_x = 450
graphgrid13_y = 350
graphgrid14_x = 500
graphgrid14_y = 350
graphgrid15_x = 550
graphgrid15_y = 350
graphgrid16_x = 600
graphgrid16_y = 350
graphgrid17_x = 650
graphgrid17_y = 350
graphgrid18_x = 700
graphgrid18_y = 350
graphgrid19_x = 750
graphgrid19_y = 350
graphgrid20_x = 800
graphgrid20_y = 350
graphgrid21_x = 850
graphgrid21_y = 350
graphgrid22_x = 900
graphgrid22_y = 350
graphgrid23_x = 100
graphgrid23_y = 550
graphgrid24_x = 150
graphgrid24_y = 550
graphgrid25_x = 200
graphgrid25_y = 550
graphgrid26_x = 250
graphgrid26_y = 550
graphgrid27_x = 300
graphgrid27_y = 550
graphgrid28_x = 350
graphgrid28_y = 550
graphgrid29_x = 400
graphgrid29_y = 550
graphgrid30_x = 450
graphgrid30_y = 550
graphgrid31_x = 500
graphgrid31_y = 550
graphgrid32_x = 550
graphgrid32_y = 550
graphgrid33_x = 600
graphgrid33_y = 550
graphgrid34_x = 650
graphgrid34_y = 550
graphgrid35_x = 700
graphgrid35_y = 550
graphgrid36_x = 750
graphgrid36_y = 550
graphgrid37_x = 800
graphgrid37_y = 550
graphgrid38_x = 850
graphgrid38_y = 550
graphgrid39_x = 900
graphgrid39_y = 550
graphgrid40_x = 900
graphgrid40_y = 500
graphgrid41_x = 900
graphgrid41_y = 450
graphgrid42_x = 900
graphgrid42_y = 400
graphgrid43_x = 950
graphgrid43_y = 450
graphgrid44_x = 1000
graphgrid44_y = 450
graphgrid45_x = 1050
graphgrid45_y = 450
graphgrid46_x = 1100
graphgrid46_y = 450
graphgrid48_x = 10000
graphgrid48_y = 10000
graphgrid49_x = 10000
graphgrid49_y = 10000
graphgrid50_x = 10000
graphgrid50_y = 10000
grid1 = 301
grid2 = 302
grid3 = 402
grid4 = 502
grid5 = 503
grid6 = 504
grid7 = 505
grid8 = 506
grid9 = 507
grid10 = 508
grid11 = 509
grid12 = 510
grid13 = 511
grid14 = 512
grid15 = 513
grid16 = 514
grid17 = 516
grid18 = 517
grid19 = 518
grid20 = 418
grid21 = 318
grid22 = 218
grid23 = 319 
grid24 = 320
grid25 = 202
grid26 = 102
grid27 = 103
grid28 = 104
grid29 = 105
grid30 = 106
grid31 = 107
grid32 = 108
grid33 = 109
grid34 = 110
grid35 = 111
grid36 = 112
grid37 = 113
grid38 = 114
grid39 = 115
grid40 = 116
grid41 = 117
grid42 = 118
grid43 = 321
grid44 = 515
grid45 = 1000
grid46 = 1000
grid47 = 1000
grid48 = 1000
grid49 = 1000
grid50 = 1000
foodgraph_x = 1115
foodgraph_y = 465
foodgrid = 322
enemygraph1_x = 115
enemygraph1_y = 365
enemygraph2_x = 515
enemygraph2_y = 365
enemygraph3_x = 715
enemygraph3_y = 365
enemygraph4_x = 915
enemygraph4_y = 365
enemygraph5_x = 315
enemygraph5_y = 565
enemygraph6_x = 465
enemygraph6_y = 565
enemygraph7_x = 715
enemygraph7_y = 565
enemygraph8_x = 915
enemygraph8_y = 465
enemygraph9_x = 10000
enemygraph9_y = 10000
enemygraph10_x = 10000
enemygraph10_y = 10000
enemy1 = 502
enemy2 = 510
enemy3 = 514
enemy4 = 518
enemy5 = 106
enemy6 = 109
enemy7 = 114
enemy8 = 318
enemy9 = 10000
enemy10 = 10000
boss = 321
enemy1_2 = 502
enemy2_2 = 510
enemy3_2 = 514
enemy4_2 = 518
enemy5_2 = 106
enemy6_2 = 109
enemy7_2 = 114
enemy8_2 = 318
enemy9_2 = 10000
enemy10_2 = 10000
boss_2 = 321
trap = 116
traploc_x = 820
traphloc_y = 550
bossgraph_x = 1052
bossgraph_y = 452
life = 8
enemylife = 10
bosslife = 20
life_2 = 8
enemylife_2 = 10
bosslife_2 = 20
cubgrid = 301
cubloc_x = 65
cubloc_y = 465
enemysize = 20
bosssize = 46
Goto dunggraphics
dung2:
whichdungeon = "dung2"
graphgrid1_x = 600
graphgrid1_y = 50
graphgrid2_x = 600
graphgrid2_y = 100
graphgrid3_x = 550
graphgrid3_y = 100
graphgrid4_x = 500
graphgrid4_y = 100
graphgrid5_x = 450
graphgrid5_y = 100
graphgrid6_x = 400
graphgrid6_y = 100
graphgrid7_x = 350
graphgrid7_y = 100
graphgrid8_x = 300
graphgrid8_y = 100
graphgrid9_x = 250
graphgrid9_y = 100
graphgrid10_x = 200
graphgrid10_y = 100
graphgrid11_x = 150
graphgrid11_y = 100
graphgrid47_x = 100
graphgrid47_y = 100
graphgrid12_x = 50
graphgrid12_y = 100
graphgrid13_x = 650
graphgrid13_y = 100
graphgrid14_x = 700
graphgrid14_y = 100
graphgrid15_x = 750
graphgrid15_y = 100
graphgrid16_x = 800
graphgrid16_y = 100
graphgrid17_x = 850
graphgrid17_y = 100
graphgrid18_x = 900
graphgrid18_y = 100
graphgrid19_x = 950
graphgrid19_y = 100
graphgrid20_x = 1000
graphgrid20_y = 100
graphgrid21_x = 1050
graphgrid21_y = 100
graphgrid22_x = 1100
graphgrid22_y = 100
graphgrid23_x = 1100
graphgrid23_y = 150
graphgrid24_x = 1100
graphgrid24_y = 200
graphgrid25_x = 1050
graphgrid25_y = 200
graphgrid26_x = 1000
graphgrid26_y = 200
graphgrid27_x = 950
graphgrid27_y = 200
graphgrid28_x = 900
graphgrid28_y = 200
graphgrid29_x = 850
graphgrid29_y = 200
graphgrid30_x = 800
graphgrid30_y = 200
graphgrid31_x = 750
graphgrid31_y = 200
graphgrid32_x = 700
graphgrid32_y = 200
graphgrid33_x = 650
graphgrid33_y = 200
graphgrid34_x = 600
graphgrid34_y = 200
graphgrid35_x = 50
graphgrid35_y = 150
graphgrid36_x = 50
graphgrid36_y = 200
graphgrid37_x = 100
graphgrid37_y = 200
graphgrid38_x = 150
graphgrid38_y = 200
graphgrid39_x = 200
graphgrid39_y = 200
graphgrid40_x = 250
graphgrid40_y = 200
graphgrid41_x = 300
graphgrid41_y = 200
graphgrid42_x = 350
graphgrid42_y = 200
graphgrid43_x = 400
graphgrid43_y = 200
graphgrid44_x = 450
graphgrid44_y = 200
graphgrid45_x = 500
graphgrid45_y = 200
graphgrid46_x = 550
graphgrid46_y = 200
graphgrid48_x = 600
graphgrid48_y = 250
graphgrid49_x = 600
graphgrid49_y = 300
graphgrid50_x = 600
graphgrid50_y = 350
grid1 = 712
grid2 = 612
grid3 = 611
grid4 = 610
grid5 = 609
grid6 = 608
grid7 = 607
grid8 = 606
grid9 = 605
grid10 = 604
grid11 = 603
grid12 = 602
grid13 = 601
grid14 = 613
grid15 = 614
grid16 = 615
grid17 = 616
grid18 = 617
grid19 = 618
grid20 = 619
grid21 = 620
grid22 = 621
grid23 = 622 
grid24 = 522
grid25 = 422
grid26 = 421
grid27 = 420
grid28 = 419
grid29 = 418
grid30 = 417
grid31 = 416
grid32 = 415
grid33 = 414
grid34 = 413
grid35 = 412
grid36 = 412
grid37 = 411
grid38 = 410
grid39 = 409
grid40 = 408
grid41 = 407
grid42 = 406
grid43 = 405
grid44 = 404
grid45 = 403
grid46 = 402
grid47 = 401
grid48 = 312
grid49 = 212
grid50 = 501
foodgraph_x = 615
foodgraph_y = 365
foodgrid = 112
enemygraph1_x = 711
enemygraph1_y = 111
enemygraph2_x = 511
enemygraph2_y = 111
enemygraph3_x = 311
enemygraph3_y = 111
enemygraph4_x = 61
enemygraph4_y = 111
enemygraph5_x = 361
enemygraph5_y = 211
enemygraph6_x = 861
enemygraph6_y = 111
enemygraph7_x = 1111
enemygraph7_y = 111
enemygraph8_x = 1111
enemygraph8_y = 211
enemygraph9_x = 761
enemygraph9_y = 211
enemygraph10_x = 611
enemygraph10_y = 211
enemy1 = 614
enemy2 = 610
enemy3 = 606
enemy4 = 601
enemy5 = 407
enemy6 = 617
enemy7 = 622
enemy8 = 422
enemy9 = 415
enemy10 = 412
boss = 212
enemy1_2 = 614
enemy2_2 = 610
enemy3_2 = 606
enemy4_2 = 601
enemy5_2 = 407
enemy6_2 = 617
enemy7_2 = 622
enemy8_2 = 422
enemy9_2 = 415
enemy10_2 = 412
boss_2 = 212
trap = 414
traploc_x = 720
traphloc_y = 200
bossgraph_x = 602
bossgraph_y = 302
life = 12
enemylife = 15
bosslife = 25
life_2 = 12
enemylife_2 = 15
bosslife_2 = 25
cubgrid = 712
cubloc_x = 611
cubloc_y = 61
enemysize = 28
bosssize = 46
Goto dunggraphics
dung3:
End:
