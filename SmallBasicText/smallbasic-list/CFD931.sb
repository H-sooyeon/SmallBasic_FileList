'while flag
on=1

'global arrays
ef[1] = "Flames"
ef[2] = "Poison"
ef[3] = "Damage"
ef[4] = "Destruction"

b[1] = "Slash"
b[2] = "Strike"
b[3] = "Stab"
b[4] = "Bash"

r[1] = "stunning you"
r[2] = "knocking you back"
r[3] = "winding you"
r[4] = "HA noooo"

'item directory
For kp=1 To 30
  mlp = 1+kp*5
' The following line could be harmful and has been automatically commented.
'   If File.ReadLine("directory.txt", 1) = "item_directory" Then
' The following line could be harmful and has been automatically commented.
'     a[kp]["id"] = File.ReadLine("directory.txt", mlp-4)
' The following line could be harmful and has been automatically commented.
'     a[kp]["name"] = File.ReadLine("directory.txt", mlp-3)
' The following line could be harmful and has been automatically commented.
'     a[kp]["d"] = File.ReadLine("directory.txt", mlp-2)
' The following line could be harmful and has been automatically commented.
'     a[kp]["e"] = File.ReadLine("directory.txt", mlp-1)
  Else
    TextWindow.ForegroundColor = "red"
    TextWindow.WriteLine("Please add directory.txt for startup.")
    TextWindow.Pause()
    on = 0
  EndIf
EndFor

'enemy index
For ka=1 To 30
  klp = 1+ka*4
' The following line could be harmful and has been automatically commented.
'   If File.ReadLine("enemy_index.txt", 1) = "enemy_index" Then
' The following line could be harmful and has been automatically commented.
'     ee[ka]["id"] = File.ReadLine("enemy_index.txt", klp-3)
' The following line could be harmful and has been automatically commented.
'     ee[ka]["n"] = File.ReadLine("enemy_index.txt", klp-2)
' The following line could be harmful and has been automatically commented.
'     ee[ka]["r"] = File.ReadLine("enemy_index.txt", klp-1)
  Else
    TextWindow.ForegroundColor = "red"
    TextWindow.WriteLine("Please add enemy_index.txt for startup.")
    TextWindow.Pause()
    on = 0
  EndIf
EndFor

'global variables
gl_event = "start"
health = 150
gold = 0

add_name = "empty"
add_damage = 0
add_effect = "^"
accuracy = 70
armour = 1
king_slain = 0

a[1] = "default"
quest = "default"
mx = 0
ffa=2
iv=0
st1=1
st2=0
st3=0
st4=0
st5=0
st6=0
st7=0
st8=0
flf=0
ev=0 'EAST VARIABLE
ga=0 'ADD GOLD VAR
gr=0 'MINUS GOLD VAR
ia=1 'INNATE ABILITY
bearing_vv=0 'Vvanderfell Bearings

enemy_name = " "
enemy_rank = 0

'gold functions
'add gold
Sub gold_add
  gold = gold+ga
  TextWindow.ForegroundColor = "yellow"
  TextWindow.WriteLine(ga + "g was added to your pouch, giving you " + gold + "g.")
  TextWindow.ForegroundColor = "white"
EndSub

'remove gold
Sub gold_remove
  gold = gold-gr
  TextWindow.ForegroundColor = "red"
  TextWindow.WriteLine(gr + "g was removed from your pouch, giving you " + gold + "g.")
  TextWindow.ForegroundColor = "white"
EndSub

' create inventory
For ss=1 To 9
  i[" " + ss]["n"] = "empty"
  i[" " + ss]["d"] = 0
  i[" " + ss]["e"] = "^"
EndFor

add_name = "Ancient Sword Shard"
add_inv()
add_name = "Ancient Sword Shard"
add_inv()
add_name = "Ancient Sword Shard"
add_inv()

'print inventory
Sub print_inv
  TextWindow.ForegroundColor = "yellow"
  TextWindow.WriteLine(gold + "g")
  TextWindow.ForegroundColor = "DarkGray"
  For sd=1 To 9
    If i[" " + sd]["e"] = "^" Then
      If i["equip"] = " "+sd Then
        TextWindow.WriteLine(sd + ". " + i[" " + sd]["n"] + " :Equipped")
      Else
        TextWindow.WriteLine(sd + ". " + i[" " + sd]["n"])
      EndIf
    ElseIf i[" " + sd]["e"] <> "^" Then
      If i["equip"] = " "+sd Then
        TextWindow.WriteLine(sd + ". " + i[" " + sd]["n"] + " (" + i[" " + sd]["e"] + ")" + " :Equipped")
      Else
        TextWindow.WriteLine(sd + ". " + i[" " + sd]["n"] + " (" + i[" " + sd]["e"] + ")")
      EndIf
    EndIf 
  EndFor
  TextWindow.ForegroundColor = "white"
EndSub

'add to inventory
Sub add_inv
  rf = 0
  For ad=1 To 9
    If i[" " + ad]["n"] = "empty" And rf <> 1 Then
      rf = 1
      i[" " + ad]["n"] = add_name
      i[" " + ad]["d"] = add_damage
      i[" " + ad]["e"] = add_effect
      TextWindow.ForegroundColor = "green"
      TextWindow.WriteLine(add_name + " has been added to your inventory")
      TextWindow.ForegroundColor = "white"
    ElseIf ad = 9 And rf <> 1 Then
      TextWindow.WriteLine("not enough space, type drop [item number]")
    EndIf
  EndFor
EndSub

'drop from inventory
Sub drop_inv
  drop = Text.GetSubText(inp, 5, 5)
  TextWindow.ForegroundColor = "red"
  TextWindow.WriteLine("dropped " + i[drop]["n"])
  TextWindow.ForegroundColor = "white"
  i[drop]["n"] = "empty"
  i[drop]["d"] = 0
  i[drop]["e"] = "^"
EndSub

'equips an item
Sub equip_wep
  epo = Text.GetSubText(inp, 6, 2)
  i["equip"] = epo
  If i[epo]["n"] = "empty" Then
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("equipped fists")
    TextWindow.ForegroundColor = "white"
  Else
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("equipped " + i[epo]["n"])
    TextWindow.ForegroundColor = "white"
  EndIf
EndSub

'uses an item
Sub use_item
  usp = Text.GetSubText(inp, 4, 2)
  If i[usp]["n"] = "Strange Letter" Then
    TextWindow.WriteLine("The Letter Reads:")
    TextWindow.WriteLine("Dear Henry, obviously you reading this means it's too late for speaking face to face but nevertheless writing this is hard. As, you know the kingship of this land is at risk and without your help it will be destroyed once and for all, for heavens sake i hope you can make your way to WinterFell where i shall eagerly await your return. Be careful young warrior and ...")
    TextWindow.WriteLine("toward the end, the writing becomes untidy and illegible, as if written in a rush, the signature is unreadable.") 
  ElseIf i[usp]["n"] = "Steak" Then
    i[usp]["n"] = "empty"
    health = health+100
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("The Steak heals a lrage amount of health, giving you a total of " + health + " health")
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Food Cans" Then
    i[usp]["n"] = "empty"
    health = health+50
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("The Food Cans heal some health, giving you a total of " + health + " health")
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Small Rations" Then
    i[usp]["n"] = "empty"
    health = health+40
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("The Rations heals some health, giving you a total of " + health + " health")
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Large Rations" Then
    i[usp]["n"] = "empty"
    health = health+100
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("The Rations heals a lot of health, giving you a total of " + health + " health")
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Ancient Sword Shard" Then
    nos = 0
    For rr=1 To 9
      If i[" " + rr]["n"] = "Ancient Sword Shard" Then
        nos = nos+1
      EndIf
    EndFor
    If nos >= 3 And ia = 1 Then
      TextWindow.ForegroundColor = "DarkBlue"
      TextWindow.WriteLine("You forge together the ancient blade, using your innate skill to create the infamous Matser Blade.")
      TextWindow.ForegroundColor = "white"
      For dd=1 To 9
        If i[" " + dd]["n"] = "Ancient Sword Shard" Then
          i[" " + dd]["n"] = "empty"
          i[" " + dd]["d"] = 0
          i[" " + dd]["e"] = "^"
        EndIf
      EndFor
        add_name = "Master Blade"
        add_damage = 220
        add_effect = "Arcane Defiance III"
        add_inv()
      ElseIf nos >= 3 And ia = 0 Then
        TextWindow.WriteLine("You must have knowledge of Smithing to forge this blade, the isle of Vvanderfell is known for it's history of great Workmanship with Swords...")
      Else
        TextWindow.WriteLine("You need 3 or more Shards to forge the Master Blade")
      EndIf
      nos = 0
  ElseIf i[usp]["n"] = "Health Potion" Then
    i[usp]["n"] = "empty"
    health = health+150
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("You feel yourself healing as all fatigue leaves your body and superficial wounds are wiped, you now have " + health + " health")
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Accuracy Potion" Then
    i[usp]["n"] = "empty"
    health = health+10
    If accuracy < 100 Then
      accuracy = accuracy+15
    EndIf
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("You become more powerful, your accuracy is now " + accuracy + "% and your health is " + health)
    TextWindow.ForegroundColor = "white"
  ElseIf i[usp]["n"] = "Chest" Then
    i[usp]["n"] = "empty"
    grv = Math.GetRandomNumber(20)
    TextWindow.WriteLine("you open the chest and find a " + a[grv]["name"] + "!")
    add_name = a[grv]["name"]
    add_damage = a[grv]["d"]
    add_effect = a[grv]["e"]
    add_inv()
  Else
    TextWindow.WriteLine("You cannot use this item.")
  EndIf
EndSub

'executes fight sequences
Sub battle
  If flf = 1 Then
    TextWindow.Pause()
    weapon = i[" " + i["equip"]]["n"]
    wepd = i[" " + i["equip"]]["d"]
    
    en = enemy_name
    elr = enemy_rank
    ed = elr*Math.GetRandomNumber(3)
    ea = 80+ed-Math.GetRandomNumber(50)
    
    If iv <> 1 Then
      eh = 60*elr+Math.GetRandomNumber(25)
      iv = 1
    EndIf
    
    TextWindow.ForegroundColor = "blue"
    TextWindow.WriteLine(quest_b)
    TextWindow.ForegroundColor = "white"
    
    For x=1 To 4
      TextWindow.WriteLine(x + ". " + b[x])
    EndFor
    
    For t=1 To 4
      If b[t] = b[inp] Then
        att = b[inp]
      ElseIf t = 4 Then
        att = b[Math.GetRandomNumber(4)]
      EndIf
    EndFor
    
    hchance = Math.GetRandomNumber(99)
    If accuracy > hchance Then
      If att = "Slash" Then
        atd = 10+Math.GetRandomNumber(wepd)-Math.GetRandomNumber(6)
        eh = eh-atd
        TextWindow.WriteLine("You Slash at the " + en + " with your " + weapon + ", dealing " + atd + " Damage")
      ElseIf att = "Stab" Then
        atd = 13+Math.GetRandomNumber(wepd)-Math.GetRandomNumber(4)
        eh = eh-atd
        TextWindow.WriteLine("You take a furious Stab at the " + en + ", dealing " + atd + " Damage")
      ElseIf att = "Bash" Then
        atd = 1+Math.GetRandomNumber(wepd)+Math.GetRandomNumber(12)
        eh = eh-atd
        TextWindow.WriteLine("You Bash the " + en + ", dealing " + atd + " Damage")
      ElseIf att = "Strike" Then
        atd = 12+Math.GetRandomNumber(wepd)-Math.GetRandomNumber(5)
        eh = eh-atd
        TextWindow.WriteLine("You Strike down upon the " + en + ", dealing " + atd + " Damage")
      EndIf
    Else
      TextWindow.ForegroundColor = "red"
      TextWindow.WriteLine("You miss the " + enemy_name + "!")
      TextWindow.ForegroundColor = "white"
    EndIf
          
    rc = Math.GetRandomNumber(120)
    If rc < ea And eh > 0 Then
        enemy_damage = (5+Math.GetRandomNumber(ed)+Math.GetRandomNumber(ea/10))-armour
        health = health-enemy_damage
        TextWindow.Write("The " + enemy_name + " deals a blow of ")
        TextWindow.ForegroundColor = "red"
        TextWindow.Write(enemy_damage)
        TextWindow.ForegroundColor = "white"
        TextWindow.WriteLine(", " + r[Math.GetRandomNumber(4)] + " (you have " + health + " health)")
      If health < 0 Then 
        TextWindow.ForegroundColor = "red"
        TextWindow.WriteLine("oh dear, you are dead")
        on = 0
        flf = 0
      EndIf
    ElseIf eh < 0 Then
      TextWindow.WriteLine("You slay the " + enemy_name + " and plunder its carcus.")
      'loot 
      al = Math.GetRandomNumber(4)-1
      For m=1 To al
        enemy_damage = 0
        enemy_name = "default"
        enemy_rank = 0
        l[m] = a[Math.GetRandomNumber(30)]["id"]
        add_name = a[l[m]]["name"]
        add_damage = a[l[m]]["d"]
        add_effect = a[l[m]]["e"]
        add_inv()
      EndFor
      ga = elr*Math.GetRandomNumber(15)+al
      gold_add()
      gl_event = enemy_wwin
      flf = 0
      search_event()
    Else
      TextWindow.WriteLine("The " + enemy_name + " misses you!")
    EndIf
  EndIf
EndSub
  
'all scenarios passed through
Sub scenario
  
  If ffd = 0 And flf = 0 Then
    For g=1 To mx
      If inp = g Then
        ffd = 1
        inp = 0
        gl_event = a[g]["a"]
        search_event()
      EndIf
    EndFor
  EndIf
  
  If ffd = 0 And flf = 0 And ffg = 0 Then
    ffg = 1
    TextWindow.ForegroundColor = "blue"
    TextWindow.WriteLine(quest)
    TextWindow.ForegroundColor = "white"
    For x=1 To mx
      TextWindow.WriteLine(x + ". " + a[x]["q"])
    EndFor
  Endif
EndSub

'finds and executes scenario ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sub search_event
  If gl_event = "start" Then
      If st1 = 1 Then
        st1=2
        TextWindow.WriteLine("You wake up in a small ditch in the ground, staring at an empurpled yet bleak sky. As you glance around you notice a small wooden pole, some battered supplies and a small pile of gold beside your feet. You grab the supplies and prepare to move forward.")
        add_name = "Battered Sword"
        add_damage = 16
        add_effect = "^"
        i["equip"] = 1
        add_inv()
        add_name = "Food Cans"
        add_damage = 0
        add_effect = "^"
        add_inv()
        ga = 15
        gold_add()
      ElseIf st1 = 2 Then
        st1=3
        TextWindow.WriteLine("You walk back by the ditch you were first woken in and now, in the light of day you notice a small - neatly sealed - envolope lying on the ground")
        add_name = "Strange Letter"
        add_damage = 0
        add_effect = "^"
        add_inv()
      Else
        TextWindow.WriteLine("you walk back by the ditch.")
      EndIf
    
    quest = "where would you like to go?"
    a[1]["q"] = "North"
      a[1]["a"] = "1_north"
    a[2]["q"] = "East"
      a[2]["a"] = "1_east"  
    a[3]["q"] = "South"
      a[3]["a"] = "1_south" 
    a[4]["q"] = "West"
      a[4]["a"] = "1_west" 
      mx = 4
      ffd = 0
      ffg = 0
      scenario()
      
    'THE POLAR NORTH
      
  ElseIf gl_event = "1_north" Then
    If st2 = 0 Then
      TextWindow.ForegroundColor = "DarkGray"
      TextWindow.WriteLine("\\You have entered The Polar North//")  
      TextWindow.ForegroundColor = "white"
      TextWindow.WriteLine("You head North, as you travel you notice the climate gradually lowering in temperture and you are aware of eyes watching you in the night. You arrive upon a noteably large crevice with a convenient flight of stairs sloping down into the shadows.")
      con_north = 1+Math.GetRandomNumber(3)
      quest = "You will:"
      a[1]["q"] = "Enter the cave"
        a[1]["a"] = "1_cave"
      a[2]["q"] = "Turn around"
        a[2]["a"] = "start"
      a[3]["q"] = "Continue North"
        a[3]["a"] = con_north+"_north"
        mx = 3
      ffd = 0
      ffg = 0  
      scenario()
    Else
      TextWindow.WriteLine("You walk past the cave that you once entered before, shuddering at the thought of what you found down there.")
    TextWindow.WriteLine("You head North, as you travel you notice the climate gradually lowering in temperture and you are aware of eyes watching you in the night. You arrive upon a noteably large crevice with a convenient flight of stairs sloping down into the shadows.")
      con_north = 1+Math.GetRandomNumber(3)
      quest = "You will:"
      a[1]["q"] = "Turn around"
        a[1]["a"] = "start"
      a[2]["q"] = "Continue North"
        a[2]["a"] = con_north+"_north"
        mx = 2
      ffd = 0
      ffg = 0  
      scenario()
    EndIf
  ElseIf gl_event = "1_cave" Then
    TextWindow.WriteLine("The stairs wind down into complete darkness and by the time you reach the bottom step, all you can see is the faint outline of the mossy walls. You hear a loud thump behind you and what sounds like the roar of a cave troll echoes around the cave.")
    quest = "You will:"
    a[1]["q"] = "Stand and fight"
      a[1]["a"] = "1_cave_fight"
    a[2]["q"] = "Attempt to run"
      a[2]["a"] = "1_cave_run" 
      mx = 2
      ffd = 0
      ffg = 0
    scenario()
  ElseIf gl_event = "1_cave_fight" Then
    TextWindow.WriteLine("The trolls breath repulses you, but you prepare your " + i[" " + i["equip"]]["n"] + " for battle.")
    st2 = 1
    quest_b = "How will you attack?"
    enemy_name = "Cave Troll"
    enemy_rank = 2
    enemy_wwin = "1_cave_win"
    flf = 1
  ElseIf gl_event = "1_cave_win" Then
    TextWindow.WriteLine("With the troll defeated, you head up towards the sunlight.")
    a[1]["q"] = "Go South"
      a[1]["a"] = "start" 
    a[2]["q"] = "Go North"
      a[2]["a"] = "2_north"
    mx = 2
    ffd = 0
    ffg = 0  
    scenario()
  ElseIf gl_event = "1_cave_run" Then
    run = Math.GetRandomNumber(100)
    If run > 40 Then
      TextWindow.WriteLine("You run for the stairs and make a swift escape up the stairs. You are now at the entrance of the stairs once again")
      quest = "You will:"
        a[1]["q"] = "Re-Enter the cave"
      a[1]["a"] = "1_cave"
        a[2]["q"] = "Go South"
      a[2]["a"] = "start" 
        a[3]["q"] = "Go North"
      a[3]["a"] = "2_north"
      mx = 3
      ffd = 0
      ffg = 0  
      scenario()
    Else
      TextWindow.WriteLine("You run for the stairs, but are batted away by the troll forcing you to scale the slope of the crevice. You eventually reach the entrance of the stairs once again")
      quest = "You will:"
        a[1]["q"] = "Re-Enter the cave"
      a[1]["a"] = "1_cave"
        a[2]["q"] = "Go South"
      a[2]["a"] = "start"
        a[3]["q"] = "Go North"
      a[3]["a"] = "2_north"  
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
    EndIf
  ElseIf gl_event = "2_north" Then
    TextWindow.WriteLine("The ground soon turns to snow around you and a blizzard is clearly in the making.")
    quest = "What action shall you take?"
        a[1]["q"] = "Take up shelter"
      a[1]["a"] = "2_north_sh"
        a[2]["q"] = "Return South"
      a[2]["a"] = "start"
        a[3]["q"] = "Continue on forward"
      a[3]["a"] = "2_north_fw"  
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
  ElseIf gl_event = "2_north_sh" Then
    arc = Math.GetRandomNumber(100)
    If arc > 70 Then
      TextWindow.WriteLine("The blizzard obliterates your shelter and you are forced to move South whilst taking damage")
      health = health-Math.GetRandomNumber(15)
      gl_event = "start"
      search_event()  
    Else
      TextWindow.WriteLine("The blizzard eventually dies down.")
      quest = "What now?"
      upu = 2+Math.GetRandomNumber(3)
      aty = Math.GetRandomNumber(6)
        a[1]["q"] = "Continue North"
      a[1]["a"] = upu+"_north"
        a[2]["q"] = "Return South"
      a[2]["a"] = "start"
        a[3]["q"] = "Search the area"
      a[3]["a"] = aty+"_area"  
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
    EndIf
  ElseIf gl_event = "2_north_fw" Then
    arc = Math.GetRandomNumber(100)
    If arc > 70 Then
      TextWindow.WriteLine("The blizzard forces you to move South whilst taking damage.")
      health = health-Math.GetRandomNumber(25)
      gl_event = "start"
      search_event()  
    Else
      TextWindow.WriteLine("The blizzard eventually dies downand you continue North.")
      gl_event = "3_north"
      search_event()  
    EndIf
  ElseIf gl_event = "3_north" Then
    TextWindow.WriteLine("A shadowy figure of a polar approaches you")
    quest = "What shall you do?"
      a[1]["q"] = "Attack!"
    a[1]["a"] = "polar_att"
      a[2]["q"] = "Run!"
    a[2]["a"] = "start"  
    mx = 2
    ffd = 0 
    ffg = 0 
    scenario()
  ElseIf gl_event = "polar_att" Then
    TextWindow.WriteLine("You unsheath your " + i[" " + i["equip"]]["n"] + " and wait the polar bear to attack!")
    quest_b = "The polar bear lunges at you!"
    enemy_name = "Polar Bear"
    enemy_rank = 3
    enemy_wwin = "polar_win"
    flf = 1
  ElseIf gl_event = "polar_win" Then
    TextWindow.WriteLine("with the polar bear defeated, where you like to head?")
    quest = "What now?"
      upu = 2+Math.GetRandomNumber(3)
      aty = Math.GetRandomNumber(3)
        a[1]["q"] = "Continue North"
      a[1]["a"] = upu+"_north"
        a[2]["q"] = "Return South"
      a[2]["a"] = "start"
        a[3]["q"] = "Search the area"
      a[3]["a"] = aty+"_area"  
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
  ElseIf gl_event = "1_area" Then
    TextWindow.WriteLine("You find an abandoned shack and on further investigation, you find it contains some supplies, you grab some and venture forward.")  
    add_name = "Large Rations"
    add_damage = 0
    add_effect = "^"
    add_inv()
    add_name = "Food Cans"
    add_damage = 0
    add_effect = "^"
    add_inv()
    gl_event = "4_north"
    search_event()
  ElseIf gl_event = "2_area" Then
    TextWindow.WriteLine("A Snow Leopard leaps on you and attacks!")
    quest_b = "The Leopard lunges at you!"
    enemy_name = "Snow Leopard"
    enemy_rank = 4
    enemy_wwin = "lp_win"
    flf = 1
  ElseIf gl_event = "lp_win" Then
    TextWindow.WriteLine("You tap the Leopard, making sure it's dead before continuing.")
    gl_event = "4_north"
    search_event()
  ElseIf gl_event = "3_area" Then
    TextWindow.WriteLine("You notice a glint of gold peaking above the snow ahead of you. You excavate it and find a large, ornate-looking chest. You pick it up and continue.")
    add_name = "Chest"
    add_damage = 0
    add_effect = "^"
    add_inv()
    gl_event = "4_north"
    search_event()
  ElseIf gl_event = "4_north" Then
    TextWindow.WriteLine("There's seems to be nothing of value or interest in this area so you sleep and recover you health,  the distant outline of a great city can be seen in the distance")
    health = health+10
    quest = "Action?"
        a[1]["q"] = "Head North"
      a[1]["a"] = "5_north"
        a[2]["q"] = "Head South"
      a[2]["a"] = "start"
      mx = 2
      ffd = 0 
      ffg = 0 
      scenario()
  ElseIf gl_event = "5_north" Then
    'winterfell
    TextWindow.WriteLine("You have finally reached the epic stronghold of the North, Winterfell currently controlled by an evil tyrant Bathus. You know that your brother is in-fact the rightful heir to the crown.")
    quest = "What now?"
      a[1]["q"] = "Enter by the gates"
    a[1]["a"] = "wh_gates"
      a[2]["q"] = "Try and sneak in through a back entrance"
    a[2]["a"] = "wh_sneak"
      a[3]["q"] = "Return South"
    a[3]["a"] = "start"  
    mx = 3
    ffd = 0
    ffg = 0 
    scenario()
  ElseIf gl_event = "wh_gates" Then
    If st3 = 0 Then
      st3 = 1
      TextWindow.WriteLine("As you approach the gates, you notice the guards encircle you and inhibit further progression. A large man, wearing noteably different armour to the rest of the guards approches you and hollers 'If it isn't the coward of the North returning for another beating!, i'll tell you what, this time i'll make sure you're dead instead of giving you the dignity of escape.'")
      enemy_name = "Head Of Guard"
      enemy_rank = 3
      enemy_wwin = "wh_dfd"
      flf = 1
    Else
      TextWindow.WriteLine("You enter by the gates, the guards are still bewildered by the death of their master.")
    EndIf
  ElseIf gl_event = "wh_dfd" Then
    TextWindow.WriteLine("The guards peer around, confused and you take this time to walk by un-noticed.")
    gl_event = "winterhold"
    search_event()
  ElseIf gl_event = "wh_sneak" Then
    TextWindow.WriteLine("You sneak around the back of the walls, letting your instincts guide you. You eventually reach a small crevice in the rocky walls, just large enough for a man to squeeze through. You climb through into a back of alley of Winterfell")
    gl_event = "winterhold"
    search_event()
  ElseIf gl_event = "winterhold" Then
    aty = 1+Math.GetRandomNumber(3)
    If king_slain <> 1 Then
      quest = "You are in Winterfell Square"
        a[1]["q"] = "Head for the palace"
      a[1]["a"] = "north_boss"
        a[2]["q"] = "Look around the market"
      a[2]["a"] = "wh_market"
        a[3]["q"] = "Search the backstreets"
      a[3]["a"] = "wh_trader" 
        a[4]["q"] = "Talk with the locals"
      a[4]["a"] = "wh_local"   
        a[5]["q"] = "Leave"
      a[5]["a"] = aty+"_north"
        a[6]["q"] = "Walk down to the Docks"
      a[6]["a"] = "wh_docks"
      mx = 6
      ffd = 0 
      ffg = 0 
      scenario()
    Else
      quest = "You are in Winterfell Square"
        a[1]["q"] = "Look around the market"
      a[1]["a"] = "wh_market"
        a[2]["q"] = "Search the backstreets"
      a[2]["a"] = "wh_trader" 
        a[3]["q"] = "Talk with the locals"
      a[3]["a"] = "wh_local"
        a[4]["q"] = "Leave"
      a[4]["a"] = aty+"_north"
        a[5]["q"] = "Walk down to the Docks"
      a[5]["a"] = "wh_docks"
      mx = 5
      ffd = 0 
      ffg = 0 
      scenario()
    EndIf
  ElseIf gl_event = "wh_local" Then
    If king_slain <> 1 Then
      TextWindow.WriteLine("The people do not seem very interested in your queries and most ignore you.")
      gl_event = "winterhold"
      search_event()
    Else
      TextWindow.WriteLine("As the new King Of Winterfell, people are all too happy to answer your queries about adventure.")
      TextWindow.WriteLine("Some Men speak of Vvanderfell, the longforgotten Island North of Winterfell.")
      TextWindow.WriteLine("Some speak of Mt. Doom, and its recent eruptions perhaps signalling the return of Dragon to the West.")
      TextWindow.WriteLine("Some speak of Elynia, a mythical Elven city South of Edoras.")
      gl_event = "winterhold"
      search_event()
    EndIf
  ElseIf gl_event = "wh_docks" Then
    TextWindow.WriteLine("You walk down to the ancient and industrious Docks Of Winterfell. It looks as if some ships are ready to leave and a man asks if you would like to travel anywhere.")
    If king_slain <> 1 Then
      quest = "Where would you like to go?"
          a[1]["q"] = "Minas Tirith"
        a[1]["a"] = "mt_trav"
          a[2]["q"] = "Osgiliath"
        a[2]["a"] = "os_dock"  
          a[3]["q"] = "Edoras"
        a[3]["a"] = "ed_dock"
          a[4]["q"] = "Walk back up to the Square"
        a[4]["a"] = "winterhold"
        mx = 4
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf bearings_vv = 1 Then
        quest = "Where would you like to go?"
          a[1]["q"] = "King's Landing"
        a[1]["a"] = "kl_dock"
          a[2]["q"] = "Osgiliath"
        a[2]["a"] = "os_dock"  
          a[3]["q"] = "Edoras"
        a[3]["a"] = "ed_dock"
          a[4]["q"] = "Vvanderfell"
        a[4]["a"] = "vv_dock"
          a[5]["q"] = "Walk back up to the Square"
        a[5]["a"] = "winterhold"
        mx = 5
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf st8 <> 1 Then
        quest = "Where would you like to go?"
          a[1]["q"] = "King's Landing"
        a[1]["a"] = "kl_dock"
          a[2]["q"] = "Osgiliath"
        a[2]["a"] = "os_dock"  
          a[3]["q"] = "Edoras"
        a[3]["a"] = "ed_dock"
          a[4]["q"] = "Walk back up to the Square"
        a[4]["a"] = "winterhold"
          a[5]["q"] = "Talk to Sir Geoffrey"
        a[5]["a"] = "wh_sir"
        mx = 5
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        a[1]["q"] = "Minas Tirith"
        a[1]["a"] = "mt_trav"
          a[2]["q"] = "Osgiliath"
        a[2]["a"] = "os_dock"  
          a[3]["q"] = "Edoras"
        a[3]["a"] = "ed_dock"
          a[4]["q"] = "Walk back up to the Square"
        a[4]["a"] = "winterhold"
        mx = 4
        ffd = 0 
        ffg = 0 
        scenario()
      EndIf
  ElseIf gl_event = "wh_sir" Then
    TextWindow.WriteLine("The former advisor to the King, Sir Geoffrey, greets you and asks very kindly if you would be so good as to hire him as your advisor.")
    quest = "Do you need an advisor?"
      a[1]["q"] = "Yes"
    a[1]["a"] = "wh_vvy"
      a[2]["q"] = "No"
    a[2]["a"] = "wh_vvn"  
    mx = 2
    ffd = 0 
    ffg = 0 
    scenario()
  ElseIf gl_event = "wh_vvn" Then
    TextWindow.WriteLine("Geoffrey looks dismayed and says its a shame but he woudl look to respect your disposition with a gift of a weapon.")
    add_name = "Elemental Blade"
    add_damage = 50
    add_effect = ef[Math.GetRandomNumber(4)]
    add_inv()
    st8 = 2
    gl_event = "wh_docks"
    search_event()
  ElseIf gl_event = "wh_vvy" Then
    TextWindow.WriteLine("Geoffrey looks delighted and encourages you to ask anything of him as his first act.")
    quest = "What will you ask of Geoffrey"
      a[1]["q"] = "Weaponry"
    a[1]["a"] = "sir_wep"
      a[2]["q"] = "Armour"
    a[2]["a"] = "sir_arm"  
      a[3]["q"] = "Adventure"
    a[3]["a"] = "sir_adv"
      a[4]["q"] = "Tales"
    a[4]["a"] = "sir_tale"  
    mx = 4
    ffd = 0 
    ffg = 0 
    scenario()
  ElseIf gl_event = "sir_wep" Then
    TextWindow.WriteLine("As it happens, i do have a curious weapon i aquirred a few years ago from a young sailor who had no use of it, i hope you make use of it.")
    TextWindow.WriteLine("Geoffrey leaves and says you can find him in his house in the square")
    add_name = "Elemental Blade"
    add_damage = 50
    add_effect = ef[Math.GetRandomNumber(4)]
    add_inv()
    st8 = 1
    gl_event = "wh_docks"
    search_event()
  ElseIf gl_event = "sir_arm" Then
    TextWindow.WriteLine("As it happens, i do have a curious set of armour i aquirred a few years ago from a young sailor who had no use of it, i hope you make use of it.")
    TextWindow.WriteLine("Geoffrey leaves and says you can find him in his house in the square")
    armour = 4
    TextWindow.WriteLine("your armour has been increased to 4")
    st8 = 1
    gl_event = "wh_docks"
    search_event()
  ElseIf gl_event = "sir_adv" Then
    TextWindow.WriteLine("Adventure! what a strange request! As it happens, i happen to know the long forgotten bearings to the legendary Vvanderfell island, the home of the greatest smiths of this land. They are ...")
    TextWindow.WriteLine("Geoffrey leaves and says you can find him in his house in the square")
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("Vvanderfell has been added to your list of destinations at all ports North of Osgilliath.")
    TextWindow.ForegroundColor = "white"
    st8 = 1
    bearings_vv = 1
    gl_event = "wh_docks"
    search_event()
  ElseIf gl_event = "sir_tale" Then
    TextWindow.WriteLine("Here, have this story book, it tells much of the history of this land.")
    add_name = "Story Book"
    add_damage = 0
    add_effect = "^"
    add_inv()
    gl_event = "wh_docks"
    search_event()
  ElseIf gl_event = "north_boss" Then
    TextWindow.WriteLine("You head up the palace steps and there seems to be a curious stillness around almost as if you were expected. You brandish your " + i[" " + i["equip"]]["n"] + " and you kick down the front gate. There is a long dining table through the entire hall and at the head of the table is a sinister looking man wearing heavy, gold plated, armour. 'I've been expecting you' he says, turning his head and, without and takes out an Onyx LongSword encrusted with diamonds.'Let Us Duel For Kingship' he shouts and advances toward you")
    quest_b = "The King Attacks!"
    enemy_name = "King Of The North"
    enemy_rank = 5
    enemy_wwin = "nboss_win"
    flf = 1
  ElseIf gl_event = "nboss_win" Then
    TextWindow.WriteLine("Now the unrightful king has been slayed, you take the Crown Of The North and prepare to head out on antoher expedition. As you are ready to leave you notice a old-looking shard of sword laying by the fireplace, you take it and head into the square.")
    add_name = "Crown Of The North"
    add_effect = "^"
    add_damage = 10
    add_inv()  
    add_name = "Ancient Sword Shard"
    add_effect = "^"
    add_damage = 10
    add_inv()  
    king_slain = 1
    gl_event = "winterhold"
    search_event()
  ElseIf gl_event = "wh_market" Then
    TextWindow.WriteLine("You notice an odd-looking man leaning by a stand towards the West of the market, his stall seems to have a large amount of memoribilia including one that particularly catches your attention, a shard of what looks to be an ancient sword. When you inquire about the shard, he quips, you must pass my test first.")
    quest = "Firstly, How tall is the tallest peak?"
        a[1]["q"] = "9001m"
      a[1]["a"] = "wrong"
        a[2]["q"] = "8848m"
      a[2]["a"] = "_2"  
        a[3]["q"] = "402m"
      a[3]["a"] = "wrong"
        a[4]["q"] = "6733m"
      a[4]["a"] = "wrong"
      mx = 4
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "_2" Then
      quest = "How deep is the deepest trench?"
        a[1]["q"] = "10km"
      a[1]["a"] = "wrong"
        a[2]["q"] = "8074m"
      a[2]["a"] = "wrong"  
        a[3]["q"] = "4367m"
      a[3]["a"] = "wrong"
        a[4]["q"] = "11km"
      a[4]["a"] = "_3"
      mx = 4
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "_3" Then
      quest = "Finally, what is that is special about this hilt?"
        a[1]["q"] = "It's shiny"
      a[1]["a"] = "wrong"
        a[2]["q"] = "It was forged by Elves"
      a[2]["a"] = "wrong"  
        a[3]["q"] = "It can be forged together to create the Master Blade"
      a[3]["a"] = "_4"
        a[4]["q"] = "It can destroy any monster in one hit"
      a[4]["a"] = "wrong"
      mx = 4
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "_4" Then
      If claimed <> 1 Then
        claimed = 1
        TextWindow.WriteLine("Congratulations you have passed my test of intellect! you can have the shard as a token of my respect.")
        add_damage = 10
        add_effect = "^"
        add_name = "Ancient Sword Shard"
        add_inv()
        gl_event = "winterhold"
        search_event()
      Else
        TextWindow.WriteLine("Congratulations on passing my test of intellect, unfortunatly i only have one shard to spare.")
        gl_event = "winterhold"
        search_event()
      EndiF
    ElseIf gl_event = "wrong" Then
      TextWindow.WriteLine("Wrong! Get out of my store ratbag!")
      gl_event = "winterhold"
      search_event()
    ElseIf gl_event = "wh_trader" Then
      TextWindow.WriteLine("The backstreets are full of stray dogs and orphans but none that seem to have anything of value, you head back into the main square.")
      gl_event = "winterhold"
      search_event() 
     
     'EAST OR THE FORGOTTEN LANDS
    
    ElseIf gl_event = "1_east" Then
      TextWindow.WriteLine("The East, or The Forgotten Lands, is notorious for being perilous and having no return without a guide. Are you sure you would like to continue?")
      quest = "Yes Or No?"
        a[1]["q"] = "Yes"
      a[1]["a"] = "2_east"
        a[2]["q"] = "No"
      a[2]["a"] = "start"  
      mx = 2
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "2_east" Then
    TextWindow.ForegroundColor = "red"
    TextWindow.WriteLine("\\You have entered The Forgotten Lands//")  
    TextWindow.ForegroundColor = "white"
    TextWindow.WriteLine("You walk for days through forest, crevice and hillside and slowly you see that the landscape has become more bleak and unrecognisable as the place where you started off. There is no way back now.")
    quest = "Preparations"
        a[1]["q"] = "Set a campfire (20% health boost)"
      a[1]["a"] = "east_camp"
        a[2]["q"] = "Get some rest (10% health + 5% accuracy boost)"
      a[2]["a"] = "east_rest"  
        a[3]["q"] = "Keep On East"
      a[3]["a"] = "3_east"
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "east_camp" Then
      ev = ev+1
      health = health+(Math.Round(health/10))
      TextWindow.WriteLine("You set a campfire, giving you a total of " + health + " health. You venture onwards.")
      gl_event = "3_east"
      search_event()
    ElseIf gl_event = "east_rest" Then
      ev = ev+1
      health = health+(Math.Round(health/20))
      accuracy = accuracy+(Math.Round(accuracy/40))
      TextWindow.WriteLine("You rest up, giving you a total of " + health + " health and " + accuracy + "% accuracy. You venture onwards.")
      gl_event = "3_east"
      search_event()
    ElseIf gl_event = "3_east" Then
      If ev = 0 Then
        ev = 1
        TextWindow.WriteLine("Your Eastward journey begins.")
        search_event()
      ElseIf ev = 5 Then
        TextWindow.WriteLine("You see an outline of what looks to be a village ahead of you but as you near, you see that the villae has long been ransacked and all the people burnt to ashes. Bones of the dead layer the streets.")
        a[1]["q"] = "Set a campfire (10% health boost)"
        a[1]["a"] = "east_camp"
          a[2]["q"] = "Get some rest (5% health + 2.5% accuracy boost)"
        a[2]["a"] = "east_rest"  
          a[3]["q"] = "Keep On East"
        a[3]["a"] = "3_east"
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf ev = 12 Then
        TextWindow.WriteLine("You come upon the remains of what was once a meadow of Green but now a field of ash and bone.")
          a[1]["q"] = "Set a campfire (10% health boost)"
        a[1]["a"] = "east_camp"
          a[2]["q"] = "Get some rest (5% health + 2.5% accuracy boost)"
        a[2]["a"] = "east_rest"  
          a[3]["q"] = "Keep On East"
        a[3]["a"] = "3_east"
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf ev = 19 Then
        TextWindow.WriteLine("The Hellish Plains, the last stretch before you reach Necropolis. Many Orcs patrol the lands around the main gate.")
        quest = "How shall you approach?"
          a[1]["q"] = "Attempt to walk through the main gate"
        a[1]["a"] = "h_main"
          a[2]["q"] = "Look for another entrance"
        a[2]["a"] = "h_side"  
          a[3]["q"] = "Disguise as an Orc"
        a[3]["a"] = "h_disguise"
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        ros = Math.GetRandomNumber(120)
        If rest <> 1 Then
          rest = 1
          ev = ev+1
          ty = Math.GetRandomNumber(10)
          enemy_name = ee[ty]["n"]
          enemy_rank = ee[ty]["r"]
          enemy_wwin = "3_east"
          TextWindow.ForegroundColor = "red"
          TextWindow.WriteLine("A " + enemy_name + " apperears! prepare yourself.")
          TextWindow.ForegroundColor = "white"
          quest_b = "The " + enemy_name + " strikes you"
          flf = 1
        Else
          rest = 0
            a[1]["q"] = "Set a campfire (10% health boost)"
          a[1]["a"] = "east_camp"
            a[2]["q"] = "Get some rest (5% health + 2.5% accuracy boost)"
          a[2]["a"] = "east_rest"  
            a[3]["q"] = "Keep On East"
          a[3]["a"] = "3_east"
          mx = 3
          ffd = 0 
          ffg = 0 
          scenario()
        EndIf
      EndIf
    ElseIf gl_event = "h_side" Then
      TextWindow.WriteLine("After walking around multiple times, you find no flaws in the walls of Necropolis, forcing you to return to your starting place.")
      gl_event = "3_east"
      search_event()
    ElseIf gl_event = "h_main" Then
      If king_slain = 1 And st4 = 0 Then
        st4 = 1
        TextWindow.WriteLine("As you near the feared City, you notice many of the orcs looking at with hate and disgust but they will not approach you. As you approacht he main gate, A large bulky Orc jumps down from the battlements and shouts 'Attack The Treacherous King Of The North'")
        enemy_name = "Head Orc"
        enemy_rank = 6
        enemy_wwin = "necropolis"
        flf = 1
      Else
        TextWindow.WriteLine("The guards of the Necropolis see that you are not an Orc and demand an entrance fee of 100g.")
        If gold < 100 Then
            a[1]["q"] = "Attack the Orc"
          a[1]["a"] = "h_atto"  
          mx = 1
          ffd = 0 
          ffg = 0 
          scenario()
        Else
            a[1]["q"] = "Pay (100g)"
          a[1]["a"] = "h_pay"
            a[2]["q"] = "Attack the Orc"
          a[2]["a"] = "h_atto"  
          mx = 2
          ffd = 0 
          ffg = 0 
          scenario()
        EndIf
      EndIf
      ElseIf gl_event = "h_pay" Then
        gr = 100
        gold_remove()
        gl_event = "necropolis"
        search_event() 
      ElseIf gl_event = "h_atto" Then
        enemy_name = "Greater Orc"
        enemy_rank = 4
        enemy_wwin = "necropolis"
        flf=1
    ElseIf gl_event = "h_disguise" Then
      yt = Math.GetRandomNumber(100)
      If yt < 51 Then
        gl_event = "h_main"
        search_event()
      Else
        TextWindow.WriteLine("You pass of as an Orc and enter into the Firey Kingdom of Necropolis.")
        gl_event = "necropolis"
        search_event()
      EndIf
    ElseIf gl_event = "necropolis" Then
      If st7 = 0 Then
        TextWindow.WriteLine("The majority of the beings in the square are not human and the few who are, look to be enslaved in the wretched place. You should tread carefully here.")
        quest = "You are stood in central Necropolis"
        a[1]["q"] = "Walk into the Potion shop"
          a[1]["a"] = "np_potion"
        a[2]["q"] = "Walk into the Royal Palace"
          a[2]["a"] = "np_palace"
        a[3]["q"] = "Try and set one of the Human slaves free"
          a[3]["a"] = "np_slave"
        a[4]["q"] = "Talk to the locals"
          a[4]["a"] = "np_local"  
        mx = 4
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        TextWindow.WriteLine("People are disgruntled but scared by your murder of the Demon in the square.")
        quest = "You are stood in central Necropolis"
        a[1]["q"] = "Walk into the Potion shop"
          a[1]["a"] = "np_potion"
        a[2]["q"] = "Walk into the Royal Palace"
          a[2]["a"] = "np_palace"
        a[3]["q"] = "Talk to the locals"
          a[3]["a"] = "np_local"  
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      EndIf
    ElseIf gl_event = "np_palace" Then
      TextWindow.WriteLine("The palace doors are closed.")
      gl_event = "necropolis"
      search_event()
    ElseIf gl_event = "np_slave" Then
      TextWindow.WriteLine("You break open the lock on a nearby woman's chain with your " + i[" " + i["equip"]]["n"] + " much to the suprise of the Demon that owns her. After recovering from his initial shock, the Demon attacks you with his Cleaver.")
      enemy_name = "Greater Demon"
      enemy_rank = 4
      enemy_wwin = "np_slave_free"
      flf=1
    ElseIf gl_event = "np_slave_free" Then
      st7=1
      TextWindow.WriteLine("The woman thanks you and gives you what little gold she has before running off into the crowd.")
      ga = 12+Math.GetRandomNumber(12)
      gold_add()
      gl_event = "necropolis"
      search_event()
    ElseIf gl_event = "np_potion" Then
      If gold > 9 And gold < 30 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Health Potion (10g)"
        a[1]["a"] = "np_health"
        mx = 1
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf gold > 29 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Health Potion (10g)"
        a[1]["a"] = "np_health"
        a[2]["q"] = "Accuracy Potion (30g)"
        a[2]["a"] = "np_acc" 
        mx = 2
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        TextWindow.WriteLine("you cannot afford anything from this shop.")
        gl_event = "necropolis"
        search_event()
      EndIf
    ElseIf gl_event = "np_local" Then
      If st6 = 0 Then
        quest = "You see a Demon who looks to be on his own."
        a[1]["q"] = "Ask about the legend of the Dothraki Blade"
          a[1]["a"] = "np_quiz"
        a[2]["q"] = "Ask for a him to guide you to Edoras"
          a[2]["a"] = "np_guide"
        mx = 2
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        quest = "You see a Demon who looks to be on his own."
        a[1]["q"] = "Ask for a him to guide you to Edoras"
          a[1]["a"] = "np_guide"
        mx = 1
        ffd = 0 
        ffg = 0 
        scenario()
      EndIf
    ElseIf gl_event = "np_guide" Then
      TextWindow.WriteLine("He, suprisingly, agrees concuring he has nothing better to do.")
      TextWindow.WriteLine("After days of Tribulation and boring small talk, you reach Edoras and, after parting with Kifuq, you wearily walk into the Town Square.")
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "np_wrong" Then
      TextWindow.WriteLine("Sorry brother but your lack of knowledge means i must refuse ownership of the blade to you.")  
      gl_event = "necropolis"
      search_event()
    ElseIf gl_event = "np_quiz" Then
      TextWindow.WriteLine("The Demon raises his eyebrows and asks you to enter his home, so you can talk in private.")
      TextWindow.WriteLine("Once inside, he talks rapidly of his burden of the Blade, he has had it for years but never told anyone for fear of being robbed. Now, he says, he can give this burden away once he proves you worthy of it's might.")
      quest = "How many Laws of Power are there?"
      a[1]["q"] = ":100:"
        a[1]["a"] = "np_wrong"
      a[2]["q"] = ":101:"
        a[2]["a"] = "np_wrong"
      a[3]["q"] = ":48:"
        a[3]["a"] = "np_2"
      a[4]["q"] = ":69:"
        a[4]["a"] = "np_wrong"
      a[5]["q"] = ":12:"
        a[5]["a"] = "np_wrong"
      a[6]["q"] = ":1:"
        a[6]["a"] = "np_wrong"
      mx = 6
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "np_2" Then
      quest = "Who is the forefather of the Laws Of Power?"
      a[1]["q"] = "R. Greene"
        a[1]["a"] = "np_3"
      a[2]["q"] = "D. Faraday"
        a[2]["a"] = "np_wrong"
      a[3]["q"] = "R. Descartes"
        a[3]["a"] = "np_wrong"
      a[4]["q"] = "Aristotle"
        a[4]["a"] = "np_wrong"
      mx = 4
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "np_3" Then
      quest = "What is the first Law Of Power?"
      a[1]["q"] = "Plan All The Way To The End"
        a[1]["a"] = "np_wrong"
      a[2]["q"] = "Pose As A Friend, Work As A Spy"
        a[2]["a"] = "np_wrong"
      a[3]["q"] = "Crush Your Enemy Totally"
        a[3]["a"] = "np_wrong"
      a[4]["q"] = "Enter With Boldness"
        a[4]["a"] = "np_wrong"
      a[5]["q"] = "Never Outshine The Master"
        a[5]["a"] = "np_done"
      a[6]["q"] = "Conceal You Intentions"
        a[6]["a"] = "np_wrong"
      mx = 6
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "np_done" Then
      TextWindow.WriteLine("The Demon is in awe of you knowledge and hands over the blade he had hidden on his back.")
      add_name = "Dothraki Blade"
      add_damage = 150
      add_effect = "Flames V"
      add_inv()
      st6=1
      gl_event = "necropolis"
      search_event()
      'THE VERDUROUS SOUTH
    ElseIf gl_event = "1_south" Then
      TextWindow.ForegroundColor = "DarkGreen"
      TextWindow.WriteLine("\\You have entered The Verdurous South//")
      TextWindow.ForegroundColor = "white"
      TextWindow.WriteLine("after walkig a few miles, the path splits.")
      quest = "Which Way?"
        a[1]["q"] = "Left"
      a[1]["a"] = "for_path"
        a[2]["q"] = "Right"
      a[2]["a"] = "edoras"  
      mx = 2
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "ed_dock" Then
      TextWindow.WriteLine("you travel on the boat for says before finally reaching the Comparitvely Small Docks of Edoras. Unfortunatly, no Ships have sailed from Edoras for years so it is quite empty so you head for the Town Centre.")
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "edoras" Then
      If st5 = 0 Then
        st5 = 1
        TextWindow.WriteLine("You reach the wall of Edoras and enter by the main gate with no issues. The centre of Edoras is animated with the locals; selling, buying, bartering and shouting. The south entrance of the town is guarded by some unfriendly looking Elven Soldiers.")
      Else
        TextWindow.WriteLine("The centre of Edoras is animated with the locals; selling, buying, bartering and shouting. The south entrance of the town is guarded by some unfriendly looking Elven Soldiers.")
      EndIf
      quest = "Through the madness, you can see:"
        a[1]["q"] = "A weapons stall"
      a[1]["a"] = "ed_wep"
        a[2]["q"] = "An armour stall"
      a[2]["a"] = "ed_arm"  
        a[3]["q"] = "The Northern exit"
      a[3]["a"] = "start"
      mx = 3
      ffd = 0 
      ffg = 0 
      scenario()
    ElseIf gl_event = "ed_wep" Then
      If gold > 10 And gold < 30 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Sword (10g)"
        a[1]["a"] = "ed_wep_ironsw"
        a[2]["q"] = "Exit"
        a[2]["a"] = "edoras"
        mx = 2
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf gold > 29 And gold < 50 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Sword (10g)"
        a[1]["a"] = "ed_wep_ironsw"
        a[2]["q"] = "Onyx Rapier (30g)"
        a[2]["a"] = "ed_wep_onyxrap" 
        a[3]["q"] = "Exit"
        a[3]["a"] = "edoras"
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf gold > 49 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Sword (10g)"
        a[1]["a"] = "ed_wep_ironsw"
        a[2]["q"] = "Onyx Rapier (30g)"
        a[2]["a"] = "ed_wep_onyxrap"
        a[3]["q"] = "Onyx GreatSword (50g)"
        a[3]["a"] = "ed_wep_onyxgreat"
        a[4]["q"] = "Exit"
        a[4]["a"] = "edoras" 
        mx = 4
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        TextWindow.WriteLine("you cannot afford anything from this store.")
        gl_event = "edoras"
        search_event()
      EndIf
    ElseIf gl_event = "ed_wep_ironsw" Then
      add_name = "Iron Sword"
      add_damage = 19
      add_effect = "^"
      add_inv()
      gr = 10
      gold_remove()
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "ed_wep_onyxrap" Then
      add_name = "Onyx Rapier"
      add_damage = 38
      add_effect = "^"
      add_inv()
      gr = 30
      gold_remove()
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "ed_wep_onyxgreat" Then
      add_name = "Onyx GreatSword"
      add_damage = 41
      add_effect = "Damage"
      add_inv()
      gr = 50
      gold_remove()
      gl_event = "edoras"
      search_event()
      'ARMOUR STORE
    ElseIf gl_event = "ed_arm" Then
      If gold > 29 And gold < 50 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Armour (30g)"
        a[1]["a"] = "ed_arm_iron"
        a[2]["q"] = "Exit"
        a[2]["a"] = "edoras"
        mx = 2
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf gold > 49 And gold < 100 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Armour (30g)"
        a[1]["a"] = "ed_arm_iron"
        a[2]["q"] = "Onyx Armour (50g)"
        a[2]["a"] = "ed_arm_onyx" 
        a[3]["q"] = "Exit"
        a[3]["a"] = "edoras"
        mx = 3
        ffd = 0 
        ffg = 0 
        scenario()
      ElseIf gold > 99 Then
        quest = "What would you like to buy?"
        a[1]["q"] = "Iron Armour (30g)"
        a[1]["a"] = "ed_arm_iron"
        a[2]["q"] = "Onyx Armour (50g)"
        a[2]["a"] = "ed_arm_onyx" 
        a[3]["q"] = "Elemental Armour (100g)"
        a[3]["a"] = "ed_arm_elem" 
        a[4]["q"] = "Exit"
        a[4]["a"] = "edoras"
        mx = 4
        ffd = 0 
        ffg = 0 
        scenario()
      Else
        TextWindow.WriteLine("you cannot afford anything from this store.")
        gl_event = "edoras"
        search_event()
      EndIf
    ElseIf gl_event = "ed_arm_iron" Then
      gr = 30
      gold_remove()
      armour = 2
      TextWindow.WriteLine("Your armour has been increased to 2")
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "ed_arm_onyx" Then
      armour = 3
      TextWindow.WriteLine("Your armour has been increased to 3")
      gr = 50
      gold_remove()
      gl_event = "edoras"
      search_event()
    ElseIf gl_event = "ed_arm_elem" Then
      armour = 4
      TextWindow.WriteLine("Your armour has been increased to 4")
      gr = 100
      gold_remove()
      gl_event = "edoras"
      search_event()
      'THE GENTEEL/REFINED WEST
    ElseIf gl_event = "1_west" Then
      TextWindow.ForegroundColor = "DarkBlue"
      TextWindow.WriteLine("\\You have entered The Genteel West//")
      TextWindow.ForegroundColor = "white"
  EndIf
EndSub

search_event()

For g=1 To mx
  If inp = g Then
    gl_event = a[g]["a"]
    search_event()
  EndIf
EndFor

While on=1
  inp = TextWindow.Read()
  scenario()
  If flf = 1 Then
    battle()
  EndIf
  
  'inventory commands
  If inp = "inv" Or inp = "inventory" Or inp = "i" Then
    print_inv()
  EndIf
  
  If inp = "health" Or inp = "H" Or inp = "h" Then
    TextWindow.ForegroundColor = "green"
    TextWindow.WriteLine("HP: " + health)
    TextWindow.ForegroundColor = "white"
  EndIf
  
  If inp = "accuracy" Or inp = "A" Or inp = "a" Then
    TextWindow.WriteLine(accuracy)
  EndIf
  
  If inp = "event" Or inp = "question" Or inp = "q" Then
    search_event()
  EndIf
  
  If inp = "weapon" Or inp = "stats" Or inp = "wep" Then
    TextWindow.ForegroundColor = "DarkRed"
    TextWindow.WriteLine(i[" " + i["equip"]]["n"])
    TextWindow.WriteLine("DAMAGE: " + i[" " + i["equip"]]["d"])
    TextWindow.WriteLine("EFFECTS: " + i[" " + i["equip"]]["e"])
    TextWindow.WriteLine("ID: " + i[" " + i["equip"]]["id"])
    TextWindow.ForegroundColor = "white"
  EndIf
  
  drinp = Text.GetSubText(inp, 1, 5)
  If drinp = "drop " Then
    drop_inv()
  EndIf
  
  eqinp = Text.GetSubText(inp, 1, 6)
  If eqinp = "equip " Then
    equip_wep()
  EndIf
  
  usinp = Text.GetSubText(inp, 1, 4)
  If usinp = "use " Then
    use_item()
  EndIf
EndWhile
